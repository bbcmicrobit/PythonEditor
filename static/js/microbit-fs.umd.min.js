(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,t(e.microbitFs={}))})(this,function(e){"use strict";var $=Number.isInteger,w=String.prototype,V=Math.max,z=Math.min,G=Math.floor,W=Math.ceil,K=Math.pow;function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function o(e,t){return s(e)||d(e,t)||c()}function s(e){if(Array.isArray(e))return e}function d(e,t){var n=[],r=!0,a=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!(t&&n.length===t));r=!0);}catch(e){a=!0,l=e}finally{try{r||null==i["return"]||i["return"]()}finally{if(a)throw l}}return n}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e){return 255&-e.reduce(function(e,t){return e+t},0)}function g(e,t){var n=e.reduce(function(e,t){return e+t},0),r=t.reduce(function(e,t){return e+t},0);return 255&-(n+r)}function p(e){return e.toString(16).toUpperCase().padStart(2,"0")}function y(e){return e.replace(":::::::::::::::::::::::::::::::::::::::::::\n","")}function h(e){var t=new Fa;return t.encode(e)}function m(e){var t=new Aa;return t.decode(e)}function E(e){var t=e.length+4;t%16&&(t+=16-t%16);var n=new Uint8Array(t).fill(0);return n[0]=77,n[1]=80,n[2]=255&e.length,n[3]=255&e.length>>8,n.set(e,4),n}function _(e){var t;if("string"==typeof e){var n=y(e);t=Oa.fromHex(n)}else t=e;var r=t.slicePad(253952,2,255);return r[0]===77&&r[1]===80}function S(e,t){var n=e.slicePad(t,4,255);return new DataView(n.buffer).getUint32(0,!0)}function x(e,t){var n=e.slicePad(t,2,255);return new DataView(n.buffer).getUint16(0,!0)}function T(e,t){var n=e.slice(t).get(t),r=0;for(r=0;r<n.length&&0!==n[r];r++);if(r===n.length)return"";var a=n.slice(0,r);return m(a)}function b(e){var t=S(e,Da.MagicValue);return t===401518716}function P(e){var t=S(e,Da.PageSize);return K(2,t)}function v(e){return x(e,Da.StartPage)}function O(e){return x(e,Da.PagesUsed)}function I(e){return S(e,Da.VersionLocation)}function A(e){var t=e.slice(268439744);if(!b(t))throw new Error("Could not find valid MicroPython UICR data.");var n=P(t),r=v(t),a=O(t),l=I(t),o=T(e,l);return{flashPageSize:n,runtimeStartPage:r,runtimeStartAddress:r*n,runtimeEndUsed:a,runtimeEndAddress:a*n,versionAddress:l,version:o}}function F(e){for(var t=[],n=R(e),r=L(e),a=n,l=1;a<r;){var o=e.slicePad(a,1,255)[0];(255===o||0===o)&&l>=0&&t.push(l),l++,a+=128}return t}function R(e){var t=A(e),n=t.runtimeEndAddress;if(n%1024)throw new Error("File system start address from UICR does not align with flash page size.");return n}function N(e){var t=262144;return _(e)&&(t=253952),t-1024}function L(e){return N(e)-1024}function D(e){e.set(L(e),new Uint8Array([253]))}function M(e,t){return R(e)+(t-1)*128}function B(e,t){var n=new Ya(e,t);return n.getFsFileSize()}function C(e,t,n){if(!t)throw new Error("File has to have a file name.");if(!n.length)throw new Error("File "+t+" has to contain data.");var r=F(e);if(0===r.length)throw new Error("There is no storage space left.");var a=M(e,r[0]),l=new Ya(t,n),o=l.getFsBytes(r);return e.set(a,o),D(e),e}function Y(e,t){var n=y(e),r=Oa.fromHex(n);return Object.keys(t).forEach(function(e){r=C(r,e,t[e])}),r.asHexString()+"\n"}function U(e){for(var t=y(e),n=Oa.fromHex(t),r=R(n),a=L(n),l={},o=[],i=r,s=1;i<a;){var d=n.slicePad(i,128,255),c=d[0];255!==c&&0!==c&&253!==c&&(l[s]=d,254===c&&o.push(s)),s++,i+=128}for(var u={},g=0,p=o;g<p.length;g++){var f=p[g],h=l[f],E=h[1],_=h[2],S=3+_,x=m(h.slice(3,S));if(u.hasOwnProperty(x))throw new Error("Found multiple files named: "+x+".");u[x]=new Uint8Array(0);for(var T=h,b=f,P=Object.keys(l).length+1;P--;){var v=T[127];if(255===v){u[x]=Ra(u[x],T.slice(S,1+E));break}else u[x]=Ra(u[x],T.slice(S,127));var k=l[v];if(!k)throw new Error("Chunk "+b+" points to unused index "+v+".");if(k[0]!==b)throw new Error("Chunk index "+v+" did not link to previous chunk index "+b+".");T=k,b=v,S=1}if(0>=P)throw new Error("Malformed file chunks did not link correctly.")}return u}function H(e){var t=y(e),n=Oa.fromHex(t),r=R(n),a=N(n);return a-r-1024}var X=function(e){try{return!!e()}catch(t){return!0}},Z=!X(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),J=!1,q=t(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),Q=t(function(e){var t=e.exports={version:"2.6.1"};"number"==typeof __e&&(__e=t)}),ee=Q.version,te=function(e){return"object"==typeof e?null!==e:"function"==typeof e},ne=function(e){if(!te(e))throw TypeError(e+" is not an object!");return e},re=q.document,ae=te(re)&&te(re.createElement),le=function(e){return ae?re.createElement(e):{}},oe=!Z&&!X(function(){return 7!=Object.defineProperty(le("div"),"a",{get:function(){return 7}}).a}),ie=function(e,t){if(!te(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!te(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!te(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!te(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},se=Object.defineProperty,de=Z?Object.defineProperty:function(e,t,n){if(ne(e),t=ie(t,!0),ne(n),oe)try{return se(e,t,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e},f={f:de},ce=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},ue=Z?function(e,t,n){return f.f(e,t,ce(1,n))}:function(e,t,n){return e[t]=n,e},ge={}.hasOwnProperty,pe=function(e,t){return ge.call(e,t)},fe=0,ye=Math.random(),he=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++fe+ye).toString(36))},me=t(function(e){var t=he("src"),n="toString",r=Function[n],a=(""+r).split(n);Q.inspectSource=function(e){return r.call(e)},(e.exports=function(e,n,r,l){var o="function"==typeof r;o&&(pe(r,"name")||ue(r,"name",n));e[n]===r||(o&&(pe(r,t)||ue(r,t,e[n]?""+e[n]:a.join(n+""))),e===q?e[n]=r:l?e[n]?e[n]=r:ue(e,n,r):(delete e[n],ue(e,n,r)))})(Function.prototype,n,function(){return"function"==typeof this&&this[t]||r.call(this)})}),Ee=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},_e=function(e,t,n){return(Ee(e),void 0===t)?e:1===n?function(n){return e.call(t,n)}:2===n?function(n,r){return e.call(t,n,r)}:3===n?function(n,r,a){return e.call(t,n,r,a)}:function(){return e.apply(t,arguments)}},Se="prototype",xe=function(e,t,n){var r,a,l,o,i=e&xe.F,s=e&xe.G,d=e&xe.S,c=e&xe.P,u=e&xe.B,g=s?q:d?q[t]||(q[t]={}):(q[t]||{})[Se],p=s?Q:Q[t]||(Q[t]={}),f=p[Se]||(p[Se]={});for(r in s&&(n=t),n)a=!i&&g&&void 0!==g[r],l=(a?g:n)[r],o=u&&a?_e(l,q):c&&"function"==typeof l?_e(Function.call,l):l,g&&me(g,r,l,e&xe.U),p[r]!=l&&ue(p,r,o),c&&f[r]!=l&&(f[r]=l)};q.core=Q,xe.F=1,xe.G=2,xe.S=4,xe.P=8,xe.B=16,xe.W=32,xe.U=64,xe.R=128;for(var Te,be=xe,Pe=he("typed_array"),ve=he("view"),ke=!!(q.ArrayBuffer&&q.DataView),Oe=ke,Ie=0,Ae=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"];Ie<9;)(Te=q[Ae[Ie++]])?(ue(Te.prototype,Pe,!0),ue(Te.prototype,ve,!0)):Oe=!1;var Fe={ABV:ke,CONSTR:Oe,TYPED:Pe,VIEW:ve},Re=function(e,t,n){for(var r in t)me(e,r,t[r],n);return e},Ne=function(e,t,n,r){if(!(e instanceof t)||r!==void 0&&r in e)throw TypeError(n+": incorrect invocation!");return e},Le=function(e){return isNaN(e=+e)?0:(0<e?G:W)(e)},De=function(e){return 0<e?z(Le(e),9007199254740991):0},Me=function(e){if(e===void 0)return 0;var t=Le(e),n=De(t);if(t!==n)throw RangeError("Wrong length!");return n},Be={}.toString,Ce=function(e){return Be.call(e).slice(8,-1)},Ye=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==Ce(e)?e.split(""):Object(e)},Ue=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e},He=function(e){return Ye(Ue(e))},$e=function(e,t){return e=Le(e),0>e?V(e+t,0):z(e,t)},we=function(e){return function(t,n,r){var a,l=He(t),o=De(l.length),i=$e(r,o);if(e&&n!=n){for(;o>i;)if(a=l[i++],a!=a)return!0;}else for(;o>i;i++)if((e||i in l)&&l[i]===n)return e||i||0;return!e&&-1}},je=t(function(e){var t=q["__core-js_shared__"]||(q["__core-js_shared__"]={});(e.exports=function(e,n){return t[e]||(t[e]=n===void 0?{}:n)})("versions",[]).push({version:Q.version,mode:"global",copyright:"\xA9 2018 Denis Pushkarev (zloirock.ru)"})}),Ve=je("keys"),ze=function(e){return Ve[e]||(Ve[e]=he(e))},Ge=we(!1),We=ze("IE_PROTO"),Ke=function(e,t){var n,r=He(e),a=0,l=[];for(n in r)n!=We&&pe(r,n)&&l.push(n);for(;t.length>a;)pe(r,n=t[a++])&&(~Ge(l,n)||l.push(n));return l},Xe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ze=Xe.concat("length","prototype"),Je=Object.getOwnPropertyNames||function(e){return Ke(e,Ze)},qe={f:Je},Qe=function(e){return Object(Ue(e))},et=function(e){for(var t=Qe(this),n=De(t.length),r=arguments.length,a=$e(1<r?arguments[1]:void 0,n),l=2<r?arguments[2]:void 0,o=void 0===l?n:$e(l,n);o>a;)t[a++]=e;return t},tt=t(function(e){var t=je("wks"),n=q.Symbol,r="function"==typeof n,a=e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:he)("Symbol."+e))};a.store=t}),nt=f.f,rt=tt("toStringTag"),lt=function(e,t,n){e&&!pe(e=n?e:e.prototype,rt)&&nt(e,rt,{configurable:!0,value:t})},ot=t(function(e,t){function n(t,n,r){var a,l,o,d=Array(r),u=8*r-n-1,g=(1<<u)-1,p=g>>1,f=23===n?k(2,-24)-k(2,-77):0,y=0,h=0>t||0===t&&0>1/t?1:0;for(t=v(t),t!=t||t===b?(l=t==t?0:1,a=g):(a=O(I(t)/A),1>t*(o=k(2,-a))&&(a--,o*=2),t+=1<=a+p?f/o:f*k(2,1-p),2<=t*o&&(a++,o/=2),a+p>=g?(l=0,a=g):1<=a+p?(l=(t*o-1)*k(2,n),a+=p):(l=t*k(2,p-1)*k(2,n),a=0));8<=n;d[y++]=255&l,l/=256,n-=8);for(a=a<<n|l,u+=n;0<u;d[y++]=255&a,a/=256,u-=8);return d[--y]|=128*h,d}function r(t,n,r){var a,l=8*r-n-1,o=(1<<l)-1,d=o>>1,c=l-7,u=r-1,g=t[u--],p=127&g;for(g>>=7;0<c;p=256*p+t[u],u--,c-=8);for(a=p&(1<<-c)-1,p>>=-c,c+=n;0<c;a=256*a+t[u],u--,c-=8);if(0===p)p=1-d;else{if(p===o)return a?NaN:g?-b:b;a+=k(2,n),p-=d}return(g?-1:1)*a*k(2,p-n)}function a(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function l(e){return[255&e]}function o(e){return[255&e,255&e>>8]}function i(e){return[255&e,255&e>>8,255&e>>16,255&e>>24]}function s(e){return n(e,52,8)}function d(e){return n(e,23,4)}function c(e,t,n){y(e.prototype,t,{get:function(){return this[n]}})}function u(e,t,n,r){var a=Me(+n);if(a+t>e[D])throw T("Wrong index!");var l=e[L]._b,o=a+e[M],i=l.slice(o,o+t);return r?i:i.reverse()}function g(e,t,n,r,a,l){var o=Me(+n);if(o+t>e[D])throw T("Wrong index!");for(var s=e[L]._b,d=o+e[M],c=r(+a),u=0;u<t;u++)s[d+u]=c[l?u:t-u-1]}var p=qe.f,y=f.f,h="ArrayBuffer",m="DataView",E="prototype",_=q[h],S=q[m],x=q.Math,T=q.RangeError,b=q.Infinity,P=_,v=x.abs,k=K,O=G,I=x.log,A=x.LN2,F="buffer",R="byteLength",N="byteOffset",L=Z?"_b":F,D=Z?"_l":R,M=Z?"_o":N;if(!Fe.ABV)_=function(e){Ne(this,_,h);var t=Me(e);this._b=et.call(Array(t),0),this[D]=t},S=function(e,t,n){Ne(this,S,m),Ne(e,_,m);var r=e[D],a=Le(t);if(0>a||a>r)throw T("Wrong offset!");if(n=void 0===n?r-a:De(n),a+n>r)throw T("Wrong length!");this[L]=e,this[M]=a,this[D]=n},Z&&(c(_,R,"_l"),c(S,F,"_b"),c(S,R,"_l"),c(S,N,"_o")),Re(S[E],{getInt8:function(e){return u(this,1,e)[0]<<24>>24},getUint8:function(e){return u(this,1,e)[0]},getInt16:function(e){var t=u(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=u(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return a(u(this,4,e,arguments[1]))},getUint32:function(e){return a(u(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return r(u(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return r(u(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){g(this,1,e,l,t)},setUint8:function(e,t){g(this,1,e,l,t)},setInt16:function(e,t){g(this,2,e,o,t,arguments[2])},setUint16:function(e,t){g(this,2,e,o,t,arguments[2])},setInt32:function(e,t){g(this,4,e,i,t,arguments[2])},setUint32:function(e,t){g(this,4,e,i,t,arguments[2])},setFloat32:function(e,t){g(this,4,e,d,t,arguments[2])},setFloat64:function(e,t){g(this,8,e,s,t,arguments[2])}});else{if(!X(function(){_(1)})||!X(function(){new _(-1)})||X(function(){return new _,new _(1.5),new _(NaN),_.name!=h})){_=function(e){return Ne(this,_),new P(Me(e))};for(var B,C=_[E]=P[E],Y=p(P),U=0;Y.length>U;)(B=Y[U++])in _||ue(_,B,P[B]);C.constructor=_}var H=new S(new _(2)),$=S[E].setInt8;H.setInt8(0,2147483648),H.setInt8(1,2147483649),(H.getInt8(0)||!H.getInt8(1))&&Re(S[E],{setInt8:function(e,t){$.call(this,e,t<<24>>24)},setUint8:function(e,t){$.call(this,e,t<<24>>24)}},!0)}lt(_,h),lt(S,m),ue(S[E],Fe.VIEW,!0),t[h]=_,t[m]=S}),st=tt("toStringTag"),dt="Arguments"==Ce(function(){return arguments}()),ct=function(e,t){try{return e[t]}catch(t){}},ut=function(e){var t,n,r;return e===void 0?"Undefined":null===e?"Null":"string"==typeof(n=ct(t=Object(e),st))?n:dt?Ce(t):"Object"==(r=Ce(t))&&"function"==typeof t.callee?"Arguments":r},gt={},pt=tt("iterator"),ft=Array.prototype,yt=function(e){return e!==void 0&&(gt.Array===e||ft[pt]===e)},ht=Object.keys||function(e){return Ke(e,Xe)},mt=Z?Object.defineProperties:function(e,t){ne(e);for(var n,r=ht(t),a=r.length,l=0;a>l;)f.f(e,n=r[l++],t[n]);return e},Et=q.document,_t=Et&&Et.documentElement,St=ze("IE_PROTO"),xt=function(){},Tt="prototype",bt=function(){var e,t=le("iframe"),n=Xe.length,r="<",a=">";for(t.style.display="none",_t.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+a+"document.F=Object"+r+"/script"+a),e.close(),bt=e.F;n--;)delete bt[Tt][Xe[n]];return bt()},Pt=Object.create||function(e,t){var n;return null===e?n=bt():(xt[Tt]=ne(e),n=new xt,xt[Tt]=null,n[St]=e),void 0===t?n:mt(n,t)},vt=ze("IE_PROTO"),kt=Object.prototype,Ot=Object.getPrototypeOf||function(e){return e=Qe(e),pe(e,vt)?e[vt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?kt:null},It=tt("iterator"),At=Q.getIteratorMethod=function(e){if(e!=null)return e[It]||e["@@iterator"]||gt[ut(e)]},Ft=Array.isArray||function(e){return"Array"==Ce(e)},Rt=tt("species"),Nt=function(e){var t;return Ft(e)&&(t=e.constructor,"function"==typeof t&&(t===Array||Ft(t.prototype))&&(t=void 0),te(t)&&(t=t[Rt],null===t&&(t=void 0))),void 0===t?Array:t},Lt=function(e,t){return new(Nt(e))(t)},Dt=function(e,t){var n=1==e,r=4==e,a=6==e,l=t||Lt;return function(t,o,i){for(var s,d,c=Qe(t),u=Ye(c),g=_e(o,i,3),p=De(u.length),f=0,y=n?l(t,p):2==e?l(t,0):void 0;p>f;f++)if((5==e||a||f in u)&&(s=u[f],d=g(s,f,c),e))if(n)y[f]=d;else if(d)switch(e){case 3:return!0;case 5:return s;case 6:return f;case 2:y.push(s);}else if(r)return!1;return a?-1:3==e||r?r:y}},Mt=tt("species"),Bt=function(e,t){var n,r=ne(e).constructor;return r===void 0||(n=ne(r)[Mt])==null?t:Ee(n)},Ct=tt("unscopables"),Yt=Array.prototype;Yt[Ct]==null&&ue(Yt,Ct,{});var Ut=function(e){Yt[Ct][e]=!0},Ht=function(e,t){return{value:t,done:!!e}},$t={};ue($t,tt("iterator"),function(){return this});var wt=function(e,t,n){e.prototype=Pt($t,{next:ce(1,n)}),lt(e,t+" Iterator")},jt=tt("iterator"),Vt=!([].keys&&"next"in[].keys()),zt="keys",Gt="values",Wt=function(){return this},Kt=function(e,t,n,r,a,l,o){wt(n,t,r);var i,s,d,c=function(e){return!Vt&&e in f?f[e]:e===zt?function(){return new n(this,e)}:e===Gt?function(){return new n(this,e)}:function(){return new n(this,e)}},u=t+" Iterator",g=a==Gt,p=!1,f=e.prototype,y=f[jt]||f["@@iterator"]||a&&f[a],h=y||c(a),m=a?g?c("entries"):h:void 0,E="Array"==t?f.entries||y:y;if(E&&(d=Ot(E.call(new e)),d!==Object.prototype&&d.next&&(lt(d,u,!0),!J&&"function"!=typeof d[jt]&&ue(d,jt,Wt))),g&&y&&y.name!==Gt&&(p=!0,h=function(){return y.call(this)}),(!J||o)&&(Vt||p||!f[jt])&&ue(f,jt,h),gt[t]=h,gt[u]=Wt,a)if(i={values:g?h:c(Gt),keys:l?h:c(zt),entries:m},o)for(s in i)s in f||me(f,s,i[s]);else be(be.P+be.F*(Vt||p),t,i);return i},Xt=Kt(Array,"Array",function(e,t){this._t=He(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Ht(1)):"keys"==t?Ht(0,n):"values"==t?Ht(0,e[n]):Ht(0,[n,e[n]])},"values");gt.Arguments=gt.Array,Ut("keys"),Ut("values"),Ut("entries");var Zt=tt("iterator"),Jt=!1;try{var qt=[7][Zt]();qt["return"]=function(){Jt=!0}}catch(t){}var Qt=function(e,t){if(!t&&!Jt)return!1;var n=!1;try{var r=[7],a=r[Zt]();a.next=function(){return{done:n=!0}},r[Zt]=function(){return a},e(r)}catch(t){}return n},en=tt("species"),tn=function(e){var t=q[e];Z&&t&&!t[en]&&f.f(t,en,{configurable:!0,get:function(){return this}})},nn=[].copyWithin||function(e,t){var n=Qe(this),r=De(n.length),a=$e(e,r),l=$e(t,r),o=2<arguments.length?arguments[2]:void 0,i=z((o===void 0?r:$e(o,r))-l,r-a),s=1;for(l<a&&a<l+i&&(s=-1,l+=i-1,a+=i-1);0<i--;)l in n?n[a]=n[l]:delete n[a],a+=s,l+=s;return n},rn={}.propertyIsEnumerable,an={f:rn},ln=Object.getOwnPropertyDescriptor,on=Z?ln:function(e,t){if(e=He(e),t=ie(t,!0),oe)try{return ln(e,t)}catch(t){}return pe(e,t)?ce(!an.f.call(e,t),e[t]):void 0},sn={f:on},dn=t(function(e){if(Z){var t=J,n=q,r=X,a=be,l=Fe,o=ot,i=Ne,s=ue,d=Re,c=De,u=Me,g=$e,p=ie,y=pe,h=ut,m=te,E=Qe,_=qe.f,S=he,x=tt,T=Dt,b=we,P=Bt,v=Xt,k=f,O=sn,I=k.f,A=O.f,F=n.RangeError,R=n.TypeError,N=n.Uint8Array,L="ArrayBuffer",D="Shared"+L,M="BYTES_PER_ELEMENT",B="prototype",C=Array[B],Y=o.ArrayBuffer,U=o.DataView,H=T(0),$=T(2),w=T(3),j=T(4),V=T(5),z=T(6),W=b(!0),K=b(!1),Q=v.values,ee=v.keys,ne=v.entries,re=C.lastIndexOf,ae=C.reduce,le=C.reduceRight,oe=C.join,se=C.sort,de=C.slice,ge=C.toString,fe=C.toLocaleString,ye=x("iterator"),me=x("toStringTag"),Ee=S("typed_constructor"),Se=S("def_constructor"),xe=l.CONSTR,Te=l.TYPED,Pe=l.VIEW,ve="Wrong length!",ke=T(1,function(e,t){return Ce(P(e,e[Se]),t)}),Oe=r(function(){return 1===new N(new Uint16Array([1]).buffer)[0]}),Ie=!!N&&!!N[B].set&&r(function(){new N(1).set({})}),Ae=function(e,t){var n=Le(e);if(0>n||n%t)throw F("Wrong offset!");return n},Be=function(e){if(m(e)&&Te in e)return e;throw R(e+" is not a typed array!")},Ce=function(e,t){if(!(m(e)&&Ee in e))throw R("It is not a typed array constructor!");return new e(t)},Ye=function(e,t){return Ue(P(e,e[Se]),t)},Ue=function(e,t){for(var n=0,r=t.length,a=Ce(e,r);r>n;)a[n]=t[n++];return a},He=function(e,t,n){I(e,t,{get:function(){return this._d[n]}})},je=function(e){var t,n,r,a,l,o,s=E(e),d=arguments.length,u=1<d?arguments[1]:void 0,g=u!==void 0,p=At(s);if(p!=null&&!yt(p)){for(o=p.call(s),r=[],t=0;!(l=o.next()).done;t++)r.push(l.value);s=r}for(g&&2<d&&(u=_e(u,arguments[2],2)),t=0,n=c(s.length),a=Ce(this,n);n>t;t++)a[t]=g?u(s[t],t):s[t];return a},Ve=function(){for(var e=0,t=arguments.length,n=Ce(this,t);t>e;)n[e]=arguments[e++];return n},ze=!!N&&r(function(){fe.call(new N(1))}),Ge=function(){return fe.apply(ze?de.call(Be(this)):Be(this),arguments)},We={copyWithin:function(e,t){return nn.call(Be(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return j(Be(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(){return et.apply(Be(this),arguments)},filter:function(e){return Ye(this,$(Be(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return V(Be(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return z(Be(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){H(Be(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return K(Be(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return W(Be(this),e,1<arguments.length?arguments[1]:void 0)},join:function(){return oe.apply(Be(this),arguments)},lastIndexOf:function(){return re.apply(Be(this),arguments)},map:function(e){return ke(Be(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(){return ae.apply(Be(this),arguments)},reduceRight:function(){return le.apply(Be(this),arguments)},reverse:function(){for(var e,t=this,n=Be(t).length,r=G(n/2),a=0;a<r;)e=t[a],t[a++]=t[--n],t[n]=e;return t},some:function(e){return w(Be(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return se.call(Be(this),e)},subarray:function(e,t){var n=Be(this),r=n.length,a=g(e,r);return new(P(n,n[Se]))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,c((t===void 0?r:g(t,r))-a))}},Ke=function(e,t){return Ye(this,de.call(Be(this),e,t))},Xe=function(e){Be(this);var t=Ae(arguments[1],1),n=this.length,r=E(e),a=c(r.length),l=0;if(a+t>n)throw F(ve);for(;l<a;)this[t+l]=r[l++]},Ze={entries:function(){return ne.call(Be(this))},keys:function(){return ee.call(Be(this))},values:function(){return Q.call(Be(this))}},Je=function(e,t){return m(e)&&e[Te]&&"symbol"!=typeof t&&t in e&&+t+""==t+""},nt=function(e,t){return Je(e,t=p(t,!0))?ce(2,e[t]):A(e,t)},rt=function(e,t,n){return Je(e,t=p(t,!0))&&m(n)&&y(n,"value")&&!y(n,"get")&&!y(n,"set")&&!n.configurable&&(!y(n,"writable")||n.writable)&&(!y(n,"enumerable")||n.enumerable)?(e[t]=n.value,e):I(e,t,n)};xe||(O.f=nt,k.f=rt),a(a.S+a.F*!xe,"Object",{getOwnPropertyDescriptor:nt,defineProperty:rt}),r(function(){ge.call({})})&&(ge=fe=function(){return oe.call(this)});var at=d({},We);d(at,Ze),s(at,ye,Ze.values),d(at,{slice:Ke,set:Xe,constructor:function(){},toString:ge,toLocaleString:Ge}),He(at,"buffer","b"),He(at,"byteOffset","o"),He(at,"byteLength","l"),He(at,"length","e"),I(at,me,{get:function(){return this[Te]}}),e.exports=function(e,o,d,g){g=!!g;var p=e+(g?"Clamped":"")+"Array",f=n[p],y=f||{},E=f&&Ot(f),S=!f||!l.ABV,x={},T=f&&f[B],b=function(t,n){var r=t._d;return r.v["get"+e](n*o+r.o,Oe)},P=function(t,n,r){var a=t._d;g&&(r=0>(r=Math.round(r))?0:255<r?255:255&r),a.v["set"+e](n*o+a.o,r,Oe)},v=function(e,t){I(e,t,{get:function(){return b(this,t)},set:function(e){return P(this,t,e)},enumerable:!0})};S?(f=d(function(e,t,n,r){i(e,f,p,"_d");var a,l,d,g,y=0,E=0;if(!m(t))d=u(t),l=d*o,a=new Y(l);else if(t instanceof Y||(g=h(t))==L||g==D){a=t,E=Ae(n,o);var _=t.byteLength;if(void 0===r){if(_%o)throw F(ve);if(l=_-E,0>l)throw F(ve)}else if(l=c(r)*o,l+E>_)throw F(ve);d=l/o}else return Te in t?Ue(f,t):je.call(f,t);for(s(e,"_d",{b:a,o:E,l:l,e:d,v:new U(a)});y<d;)v(e,y++)}),T=f[B]=Pt(at),s(T,"constructor",f)):(!r(function(){f(1)})||!r(function(){new f(-1)})||!Qt(function(e){new f,new f(null),new f(1.5),new f(e)},!0))&&(f=d(function(e,t,n,r){i(e,f,p);var a;return m(t)?t instanceof Y||(a=h(t))==L||a==D?void 0===r?void 0===n?new y(t):new y(t,Ae(n,o)):new y(t,Ae(n,o),r):Te in t?Ue(f,t):je.call(f,t):new y(u(t))}),H(E===Function.prototype?_(y):_(y).concat(_(E)),function(e){e in f||s(f,e,y[e])}),f[B]=T,!t&&(T.constructor=f));var k=T[ye],O=!!k&&("values"==k.name||k.name==null),A=Ze.values;s(f,Ee,!0),s(T,Te,p),s(T,Pe,!0),s(T,Se,f),(g?new f(1)[me]!=p:!(me in T))&&I(T,me,{get:function(){return p}}),x[p]=f,a(a.G+a.W+a.F*(f!=y),x),a(a.S,p,{BYTES_PER_ELEMENT:o}),a(a.S+a.F*r(function(){y.of.call(f,1)}),p,{from:je,of:Ve}),M in T||s(T,M,o),a(a.P,p,We),tn(p),a(a.P+a.F*Ie,p,{set:Xe}),a(a.P+a.F*!O,p,Ze),t||T.toString==ge||(T.toString=ge),a(a.P+a.F*r(function(){new f(1).slice()}),p,{slice:Ke}),a(a.P+a.F*(r(function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()})||!r(function(){T.toLocaleString.call([1,2])})),p,{toLocaleString:Ge}),gt[p]=O?k:A,t||O||s(T,ye,A)}}else e.exports=function(){}});dn("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}}),be(be.P,"Array",{fill:et}),Ut("fill");var cn=function(e){return function(t,n){var r,o,d=Ue(t)+"",s=Le(n),i=d.length;return 0>s||s>=i?e?"":void 0:(r=d.charCodeAt(s),55296>r||56319<r||s+1===i||56320>(o=d.charCodeAt(s+1))||57343<o?e?d.charAt(s):r:e?d.slice(s,s+2):(r-55296<<10)+(o-56320)+65536)}},un=cn(!0),at=function(e,t,n){return t+(n?un(e,t).length:1)},it=RegExp.prototype.exec,gn=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==ut(e))throw new TypeError("RegExp#exec called on incompatible receiver");return it.call(e,t)},pn=function(){var e=ne(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},fn=RegExp.prototype.exec,yn=w.replace,hn=fn,mn="lastIndex",En=function(){var e=/a/,t=/b*/g;return fn.call(e,"a"),fn.call(t,"a"),0!==e[mn]||0!==t[mn]}(),_n=/()??/.exec("")[1]!==void 0;(En||_n)&&(hn=function(e){var t,n,r,a,l=this;return _n&&(n=new RegExp("^"+l.source+"$(?!\\s)",pn.call(l))),En&&(t=l[mn]),r=fn.call(l,e),En&&r&&(l[mn]=l.global?r.index+r[0].length:t),_n&&r&&1<r.length&&yn.call(r[0],n,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)}),r});var Sn=hn;be({target:"RegExp",proto:!0,forced:Sn!==/./.exec},{exec:Sn});var xn=tt("species"),Tn=!X(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),bn=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),Pn=function(e,t,n){var r=tt(e),a=!X(function(){var t={};return t[r]=function(){return 7},7!=""[e](t)}),l=a?!X(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[xn]=function(){return n}),n[r](""),!t}):void 0;if(!a||!l||"replace"===e&&!Tn||"split"===e&&!bn){var o=/./[r],i=n(Ue,r,""[e],function(e,t,n,r,l){return t.exec===Sn?a&&!l?{done:!0,value:o.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),s=i[0],d=i[1];me(String.prototype,e,s),ue(RegExp.prototype,r,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}},vn=/\$([$&`']|\d\d?|<[^>]*>)/g,kn=/\$([$&`']|\d\d?)/g,On=function(e){return e===void 0?e:e+""};Pn("replace",2,function(e,t,n,r){function a(e,t,r,a,l,o){var i=r+e.length,s=a.length,d=kn;return void 0!==l&&(l=Qe(l),d=vn),n.call(o,d,function(o,d){var c;switch(d.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(i);case"<":c=l[d.slice(1,-1)];break;default:var u=+d;if(0==u)return d;if(u>s){var n=G(u/10);return 0===n?d:n<=s?void 0===a[n-1]?d.charAt(1):a[n-1]+d.charAt(1):d}c=a[u-1];}return void 0===c?"":c})}return[function(r,a){var l=e(this),o=r==null?void 0:r[t];return o===void 0?n.call(l+"",r,a):o.call(r,l,a)},function(e,t){var l=r(n,e,this,t);if(l.done)return l.value;var o=ne(e),s=this+"",d="function"==typeof t;d||(t=t+"");var c=o.global;if(c){var u=o.unicode;o.lastIndex=0}for(var g,p=[];(g=gn(o,s),null!==g)&&!(p.push(g),!c);){var f=g[0]+"";""==f&&(o.lastIndex=at(s,De(o.lastIndex),u))}for(var y="",h=0,m=0;m<p.length;m++){g=p[m];for(var E=g[0]+"",_=V(z(Le(g.index),s.length),0),S=[],x=1;x<g.length;x++)S.push(On(g[x]));var T=g.groups;if(d){var b=[E].concat(S,_,s);T!==void 0&&b.push(T);var P=t.apply(void 0,b)+""}else P=a(E,s,_,S,T,t);_>=h&&(y+=s.slice(h,_)+P,h=_+E.length)}return y+s.slice(h)}]});var In=function(t,n,e,r){try{return r?n(ne(e)[0],e[1]):n(e)}catch(n){var a=t["return"];throw void 0!==a&&ne(a.call(t)),n}},An=t(function(e){var t={},n={},r=e.exports=function(e,r,a,l,o){var i,s,d,c,u=o?function(){return e}:At(e),g=_e(a,l,r?2:1),p=0;if("function"!=typeof u)throw TypeError(e+" is not iterable!");if(yt(u)){for(i=De(e.length);i>p;p++)if(c=r?g(ne(s=e[p])[0],s[1]):g(e[p]),c===t||c===n)return c;}else for(d=u.call(e);!(s=d.next()).done;)if(c=In(d,g,s.value,r),c===t||c===n)return c};r.BREAK=t,r.RETURN=n}),Fn=t(function(e){var t=he("meta"),n=f.f,r=0,a=Object.isExtensible||function(){return!0},l=!X(function(){return a(Object.preventExtensions({}))}),o=function(e){n(e,t,{value:{i:"O"+ ++r,w:{}}})},i=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!te(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!pe(e,t)){if(!a(e))return"F";if(!n)return"E";o(e)}return e[t].i},getWeak:function(e,n){if(!pe(e,t)){if(!a(e))return!0;if(!n)return!1;o(e)}return e[t].w},onFreeze:function(e){return l&&i.NEED&&a(e)&&!pe(e,t)&&o(e),e}}}),Rn=Fn.KEY,Nn=Fn.NEED,Ln=Fn.fastKey,Dn=Fn.getWeak,Mn=Fn.onFreeze,Bn=function(e,t){if(!te(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},Cn=f.f,Yn=Fn.fastKey,Un=Z?"_s":"size",Hn=function(e,t){var n,r=Yn(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n},$n={getConstructor:function(e,t,n,r){var a=e(function(e,l){Ne(e,a,t,"_i"),e._t=t,e._i=Pt(null),e._f=void 0,e._l=void 0,e[Un]=0,null!=l&&An(l,n,e[r],e)});return Re(a.prototype,{clear:function(){for(var e=Bn(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[Un]=0},delete:function(e){var n=Bn(this,t),r=Hn(n,e);if(r){var a=r.n,l=r.p;delete n._i[r.i],r.r=!0,l&&(l.n=a),a&&(a.p=l),n._f==r&&(n._f=a),n._l==r&&(n._l=l),n[Un]--}return!!r},forEach:function(e){Bn(this,t);for(var n,r=_e(e,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!Hn(Bn(this,t),e)}}),Z&&Cn(a.prototype,"size",{get:function(){return Bn(this,t)[Un]}}),a},def:function(e,t,n){var r,a,l=Hn(e,t);return l?l.v=n:(e._l=l={i:a=Yn(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},!e._f&&(e._f=l),r&&(r.n=l),e[Un]++,"F"!==a&&(e._i[a]=l)),e},getEntry:Hn,setStrong:function(e,t,n){Kt(e,t,function(e,n){this._t=Bn(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?Ht(0,n.k):"values"==t?Ht(0,n.v):Ht(0,[n.k,n.v]):(e._t=void 0,Ht(1))},n?"entries":"values",!n,!0),tn(t)}},wn=function(e,t){if(ne(e),!te(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},jn={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=_e(Function.call,sn.f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(e,r){return wn(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:wn},Vn=jn.set,zn=function(e,t,n){var r,a=t.constructor;return a!==n&&"function"==typeof a&&(r=a.prototype)!==n.prototype&&te(r)&&Vn&&Vn(e,r),e},Gn=function(e,t,n,r,a,l){var o=q[e],i=o,s=a?"set":"add",d=i&&i.prototype,c={},u=function(e){var t=d[e];me(d,e,"delete"==e?function(e){return(!l||te(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return(!l||te(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return l&&!te(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"!=typeof i||!(l||d.forEach&&!X(function(){new i().entries().next()})))i=r.getConstructor(t,e,a,s),Re(i.prototype,n),Fn.NEED=!0;else{var g=new i,p=g[s](l?{}:-0,1)!=g,f=X(function(){g.has(1)}),y=Qt(function(e){new i(e)}),h=!l&&X(function(){for(var e=new i,t=5;t--;)e[s](t,t);return!e.has(-0)});y||(i=t(function(t,n){Ne(t,i,e);var r=zn(new o,t,i);return null!=n&&An(n,a,r[s],r),r}),i.prototype=d,d.constructor=i),(f||h)&&(u("delete"),u("has"),a&&u("get")),(h||p)&&u(s),l&&d.clear&&delete d.clear}return lt(i,e),c[e]=i,be(be.G+be.W+be.F*(i!=o),c),l||r.setStrong(i,e,a),i},Wn="Set",Kn=Gn(Wn,function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return $n.def(Bn(this,Wn),e=0===e?0:e,e)}},$n);Pn("match",1,function(e,t,r,a){return[function(n){var r=e(this),a=n==null?void 0:n[t];return a===void 0?new RegExp(n)[t](r+""):a.call(n,r)},function(e){var t=a(r,e,this);if(t.done)return t.value;var l=ne(e),o=this+"";if(!l.global)return gn(l,o);var i=l.unicode;l.lastIndex=0;for(var s,d=[],c=0;null!==(s=gn(l,o));){var u=s[0]+"";d[c]=u,""==u&&(l.lastIndex=at(o,De(l.lastIndex),i)),c++}return 0===c?null:d}]});var Xn=function(e,t,n){t in e?f.f(e,t,ce(0,n)):e[t]=n};be(be.S+be.F*!Qt(function(){}),"Array",{from:function(e){var t,n,r,a,l=Qe(e),o="function"==typeof this?this:Array,i=arguments.length,s=1<i?arguments[1]:void 0,d=void 0!==s,c=0,u=At(l);if(d&&(s=_e(s,2<i?arguments[2]:void 0,2)),null!=u&&!(o==Array&&yt(u)))for(a=u.call(l),n=new o;!(r=a.next()).done;c++)Xn(n,c,d?In(a,s,[r.value,c],!0):r.value);else for(t=De(l.length),n=new o(t);t>c;c++)Xn(n,c,d?s(l[c],c):l[c]);return n.length=c,n}});var Zn=[].sort,Jn=[1,2,3];be(be.P+be.F*(X(function(){Jn.sort(void 0)})||!X(function(){Jn.sort(null)})||!function(e,t){return!!e&&X(function(){t?e.call(null,function(){},1):e.call(null)})}(Zn)),"Array",{sort:function(e){return e===void 0?Zn.call(Qe(this)):Zn.call(Qe(this),Ee(e))}});(function(e,t){var n=(Q.Object||{})[e]||Object[e],r={};r[e]=t(n),be(be.S+be.F*X(function(){n(1)}),"Object",r)})("keys",function(){return function(e){return ht(Qe(e))}});var qn={f:tt},Qn=f.f,er=function(e){var t=Q.Symbol||(Q.Symbol=q.Symbol||{});"_"==e.charAt(0)||e in t||Qn(t,e,{value:qn.f(e)})};er("asyncIterator");var tr=Object.getOwnPropertySymbols,nr={f:tr},rr=function(e){var t=ht(e),n=nr.f;if(n)for(var r,a=n(e),l=an.f,o=0;a.length>o;)l.call(e,r=a[o++])&&t.push(r);return t},ar=qe.f,lr={}.toString,or="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ir=function(e){try{return ar(e)}catch(t){return or.slice()}},sr={f:function(e){return or&&"[object Window]"==lr.call(e)?ir(e):ar(He(e))}},dr=Fn.KEY,cr=sn.f,ur=f.f,gr=sr.f,pr=q.Symbol,fr=q.JSON,yr=fr&&fr.stringify,hr="prototype",mr=tt("_hidden"),Er=tt("toPrimitive"),_r={}.propertyIsEnumerable,Sr=je("symbol-registry"),xr=je("symbols"),Tr=je("op-symbols"),br=Object[hr],Pr="function"==typeof pr,vr=q.QObject,kr=!vr||!vr[hr]||!vr[hr].findChild,Or=Z&&X(function(){return 7!=Pt(ur({},"a",{get:function(){return ur(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=cr(br,t);r&&delete br[t],ur(e,t,n),r&&e!==br&&ur(br,t,r)}:ur,Ir=function(e){var t=xr[e]=Pt(pr[hr]);return t._k=e,t},Ar=Pr&&"symbol"==typeof pr.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof pr},Fr=function(e,t,n){return e===br&&Fr(Tr,t,n),ne(e),t=ie(t,!0),ne(n),pe(xr,t)?(n.enumerable?(pe(e,mr)&&e[mr][t]&&(e[mr][t]=!1),n=Pt(n,{enumerable:ce(0,!1)})):(!pe(e,mr)&&ur(e,mr,ce(1,{})),e[mr][t]=!0),Or(e,t,n)):ur(e,t,n)},Rr=function(e,t){ne(e);for(var n,r=rr(t=He(t)),a=0,o=r.length;o>a;)Fr(e,n=r[a++],t[n]);return e},Nr=function(e){var t=_r.call(this,e=ie(e,!0));return(this!==br||!pe(xr,e)||pe(Tr,e))&&(!(t||!pe(this,e)||!pe(xr,e)||pe(this,mr)&&this[mr][e])||t)},Lr=function(e,t){if(e=He(e),t=ie(t,!0),e!==br||!pe(xr,t)||pe(Tr,t)){var n=cr(e,t);return n&&pe(xr,t)&&!(pe(e,mr)&&e[mr][t])&&(n.enumerable=!0),n}},Dr=function(e){for(var t,n=gr(He(e)),r=[],a=0;n.length>a;)pe(xr,t=n[a++])||t==mr||t==dr||r.push(t);return r},Mr=function(e){for(var t,n=e===br,r=gr(n?Tr:He(e)),a=[],l=0;r.length>l;)pe(xr,t=r[l++])&&(!n||pe(br,t))&&a.push(xr[t]);return a};Pr||(pr=function(){if(this instanceof pr)throw TypeError("Symbol is not a constructor!");var e=he(0<arguments.length?arguments[0]:void 0),t=function(n){this===br&&t.call(Tr,n),pe(this,mr)&&pe(this[mr],e)&&(this[mr][e]=!1),Or(this,e,ce(1,n))};return Z&&kr&&Or(br,e,{configurable:!0,set:t}),Ir(e)},me(pr[hr],"toString",function(){return this._k}),sn.f=Lr,f.f=Fr,qe.f=sr.f=Dr,an.f=Nr,nr.f=Mr,Z&&!J&&me(br,"propertyIsEnumerable",Nr,!0),qn.f=function(e){return Ir(tt(e))}),be(be.G+be.W+be.F*!Pr,{Symbol:pr});for(var Br=["hasInstance","isConcatSpreadable","iterator","match","replace","search","species","split","toPrimitive","toStringTag","unscopables"],Cr=0;Br.length>Cr;)tt(Br[Cr++]);for(var Yr=ht(tt.store),Ur=0;Yr.length>Ur;)er(Yr[Ur++]);be(be.S+be.F*!Pr,"Symbol",{for:function(e){return pe(Sr,e+="")?Sr[e]:Sr[e]=pr(e)},keyFor:function(e){if(!Ar(e))throw TypeError(e+" is not a symbol!");for(var t in Sr)if(Sr[t]===e)return t},useSetter:function(){kr=!0},useSimple:function(){kr=!1}}),be(be.S+be.F*!Pr,"Object",{create:function(e,t){return t===void 0?Pt(e):Rr(Pt(e),t)},defineProperty:Fr,defineProperties:Rr,getOwnPropertyDescriptor:Lr,getOwnPropertyNames:Dr,getOwnPropertySymbols:Mr}),fr&&be(be.S+be.F*(!Pr||X(function(){var e=pr();return"[null]"!=yr([e])||"{}"!=yr({a:e})||"{}"!=yr(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(n=t=r[1],(te(t)||void 0!==e)&&!Ar(e))return Ft(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Ar(t))return t}),r[1]=t,yr.apply(fr,r)}}),pr[hr][Er]||ue(pr[hr],Er,pr[hr].valueOf),lt(pr,"Symbol"),lt(Math,"Math",!0),lt(q.JSON,"JSON",!0);for(var Hr=tt("iterator"),$r=tt("toStringTag"),wr=gt.Array,jr={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Vr=ht(jr),zr=0;zr<Vr.length;zr++){var Gr,Wr=Vr[zr],Kr=jr[Wr],Xr=q[Wr],Zr=Xr&&Xr.prototype;if(Zr&&(Zr[Hr]||ue(Zr,Hr,wr),Zr[$r]||ue(Zr,$r,Wr),gt[Wr]=wr,Kr))for(Gr in Xt)Zr[Gr]||me(Zr,Gr,Xt[Gr],!0)}var Jr=cn(!0);Kt(String,"String",function(e){this._t=e+"",this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=Jr(t,n),this._i+=e.length,{value:e,done:!1})});var qr=Gn("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=$n.getEntry(Bn(this,"Map"),e);return t&&t.v},set:function(e,t){return $n.def(Bn(this,"Map"),0===e?0:e,t)}},$n,!0),Qr="\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF",ea="["+Qr+"]",ta="\u200B\x85",na=RegExp("^"+ea+ea+"*"),ra=RegExp(ea+ea+"*$"),aa=function(e,t,n){var r={},a=X(function(){return!!Qr[e]()||ta[e]()!=ta}),l=r[e]=a?t(la):Qr[e];n&&(r[n]=l),be(be.P+be.F*a,"String",r)},la=aa.trim=function(e,t){return e=Ue(e)+"",1&t&&(e=e.replace(na,"")),2&t&&(e=e.replace(ra,"")),e},oa=qe.f,ia=sn.f,sa=f.f,da=aa.trim,ca="Number",ua=q[ca],ga=ua,pa=ua.prototype,fa=Ce(Pt(pa))==ca,ya="trim"in w,ha=function(e){var t=ie(e,!1);if("string"==typeof t&&2<t.length){t=ya?t.trim():da(t,3);var n,r,a,o=t.charCodeAt(0);if(43===o||45===o){if(n=t.charCodeAt(2),88===n||120===n)return NaN;}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+t;}for(var s,d=t.slice(2),c=0,u=d.length;c<u;c++)if(s=d.charCodeAt(c),48>s||s>a)return NaN;return parseInt(d,r)}}return+t};if(!ua(" 0o1")||!ua("0b1")||ua("+0x1")){ua=function(e){var t=1>arguments.length?0:e,n=this;return n instanceof ua&&(fa?X(function(){pa.valueOf.call(n)}):Ce(n)!=ca)?zn(new ga(ha(t)),n,ua):ha(t)};for(var ma,Ea=Z?oa(ga):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_a=0;Ea.length>_a;_a++)pe(ga,ma=Ea[_a])&&!pe(ua,ma)&&sa(ua,ma,ia(ga,ma));ua.prototype=pa,pa.constructor=ua,me(q,ca,ua)}be(be.S,"Number",{isInteger:function(e){return!te(e)&&isFinite(e)&&G(e)===e}}),Z&&"g"!=/./g.flags&&f.f(RegExp.prototype,"flags",{configurable:!0,get:pn});var Sa=/./.toString,xa=function(e){me(RegExp.prototype,"toString",e,!0)};X(function(){return"/a/b"!=Sa.call({source:"a",flags:"b"})})?xa(function(){var e=ne(this);return"/".concat(e.source,"/","flags"in e?e.flags:!Z&&e instanceof RegExp?pn.call(e):void 0)}):Sa.name!="toString"&&xa(function(){return Sa.call(this)});var Ta=function(e){var t=Ue(this)+"",r="",a=Le(e);if(0>a||a==1/0)throw RangeError("Count can't be negative");for(;0<a;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r},ba=function(e,t,n,r){var a=Ue(e)+"",l=a.length,o=void 0===n?" ":n+"",i=De(t);if(i<=l||""==o)return a;var s=i-l,d=Ta.call(o,W(s/o.length));return d.length>s&&(d=d.slice(0,s)),r?d+a:a+d},Pa=q.navigator,va=Pa&&Pa.userAgent||"";be(be.P+be.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(va),"String",{padStart:function(e){return ba(this,e,1<arguments.length?arguments[1]:void 0,!0)}});var ka=/:([0-9A-Fa-f]{8,})([0-9A-Fa-f]{2})(?:\r\n|\r|\n|)/g;$=$||function(e){return"number"==typeof e&&isFinite(e)&&G(e)===e};var Oa=function(){function e(t){if(r(this,e),this._blocks=new Map,t&&"function"==typeof t[Symbol.iterator]){var a=!0,l=!1,o=void 0;try{for(var i,s,d=t[Symbol.iterator]();!(a=(i=d.next()).done);a=!0){if(s=i.value,!(s instanceof Array)||2!==s.length)throw new Error("First parameter to MemoryMap constructor must be an iterable of [addr, bytes] or undefined");this.set(s[0],s[1])}}catch(e){l=!0,o=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw o}}}else if("object"===n(t))for(var c,u=Object.keys(t),g=0;g<u.length;g++)c=u[g],this.set(parseInt(c),t[c]);else if(void 0!==t&&null!==t)throw new Error("First parameter to MemoryMap constructor must be an iterable of [addr, bytes] or undefined")}return l(e,[{key:"set",value:function(e,t){if(!$(e))throw new Error("Address passed to MemoryMap is not an integer");if(0>e)throw new Error("Address passed to MemoryMap is negative");if(!(t instanceof Uint8Array))throw new Error("Bytes passed to MemoryMap are not an Uint8Array");return this._blocks.set(e,t)}},{key:"get",value:function(e){return this._blocks.get(e)}},{key:"clear",value:function(){return this._blocks.clear()}},{key:"delete",value:function(e){return this._blocks.delete(e)}},{key:"entries",value:function(){return this._blocks.entries()}},{key:"forEach",value:function(e,t){return this._blocks.forEach(e,t)}},{key:"has",value:function(e){return this._blocks.has(e)}},{key:"keys",value:function(){return this._blocks.keys()}},{key:"values",value:function(){return this._blocks.values()}},{key:Symbol.iterator,value:function(){return this._blocks[Symbol.iterator]()}},{key:"join",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1/0,n=Array.from(this.keys()).sort(function(e,t){return e-t}),r=new Map,a=-1,o=-1,s=0,d=n.length;s<d;s++){var l=n[s],c=this.get(n[s]).length;if(o===l&&o-a<t)r.set(a,r.get(a)+c),o+=c;else if(o<=l)r.set(l,c),a=l,o=l+c;else throw new Error("Overlapping data around address 0x"+l.toString(16))}for(var u,g,p=new e,f=-1,y=0,h=n.length;y<h;y++)g=n[y],r.has(g)&&(u=new Uint8Array(r.get(g)),p.set(g,u),f=g),u.set(this.get(g),g-f);return p}},{key:"paginate",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1024,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255;if(0>=t)throw new Error("Page size must be greater than zero");for(var r,a=new e,o=Array.from(this.keys()).sort(function(e,t){return e-t}),s=0,d=o.length;s<d;s++)for(var l=o[s],c=this.get(l),u=c.length,g=l-l%t;g<l+u;g+=t){r=a.get(g),r||(r=new Uint8Array(t),r.fill(n),a.set(g,r));var p=g-l,f=void 0;0>=p?(f=c.subarray(0,z(t+p,u)),r.set(f,-p)):(f=c.subarray(p,p+z(t,u-p)),r.set(f,0))}return a}},{key:"getUint32",value:function(e,t){for(var n=Array.from(this.keys()),r=0,a=n.length;r<a;r++){var l=n[r],o=this.get(l),s=o.length;if(l<=e&&e+4<=l+s)return new DataView(o.buffer,e-l,4).getUint32(0,t)}}},{key:"asHexString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:16,t=0,n=-65536,r=[];if(0>=e)throw new Error("Size of record must be greater than zero");else if(255<e)throw new Error("Size of record must be less than 256");for(var a=new Uint8Array(6),o=new Uint8Array(4),s=Array.from(this.keys()).sort(function(e,t){return e-t}),d=0,c=s.length;d<c;d++){var l=s[d],f=this.get(l);if(!(f instanceof Uint8Array))throw new Error("Block at offset "+l+" is not an Uint8Array");if(0>l)throw new Error("Block at offset "+l+" has a negative thus invalid address");var y=f.length;if(y){if(l>n+65535&&(n=l-l%65536,t=0,a[0]=2,a[1]=0,a[2]=0,a[3]=4,a[4]=n>>24,a[5]=n>>16,r.push(":"+Array.prototype.map.call(a,p).join("")+p(u(a)))),l<n+t)throw new Error("Block starting at 0x"+l.toString(16)+" overlaps with a previous block.");t=l%65536;var h=0,m=l+y;if(4294967295<m)throw new Error("Data cannot be over 0xFFFFFFFF");for(;n+t<m;){65535<t&&(n+=65536,t=0,a[0]=2,a[1]=0,a[2]=0,a[3]=4,a[4]=n>>24,a[5]=n>>16,r.push(":"+Array.prototype.map.call(a,p).join("")+p(u(a))));for(var E=-1;65536>t&&E;)if(E=z(e,m-n-t,65536-t),E){o[0]=E,o[1]=t>>8,o[2]=t,o[3]=0;var _=f.subarray(h,h+E);r.push(":"+Array.prototype.map.call(o,p).join("")+Array.prototype.map.call(_,p).join("")+p(g(o,_))),h+=E,t+=E}}}}return r.push(":00000001FF"),r.join("\n")}},{key:"clone",value:function(){var t=new e,n=!0,r=!1,a=void 0;try{for(var l,i=this[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var s=o(l.value,2),d=s[0],c=s[1];t.set(d,new Uint8Array(c))}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return t}},{key:"slice",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0;if(0>n)throw new Error("Length of the slice cannot be negative");var r=new e,a=!0,l=!1,i=void 0;try{for(var s,d=this[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var c=o(s.value,2),u=c[0],g=c[1],p=g.length;if(u+p>=t&&u<t+n){var f=V(t,u),y=z(t+n,u+p),h=y-f,m=f-u;0<h&&r.set(f,g.subarray(m,m+h))}}}catch(e){l=!0,i=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw i}}return r}},{key:"slicePad",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:255;if(0>t)throw new Error("Length of the slice cannot be negative");var r=new Uint8Array(t).fill(n),a=!0,l=!1,i=void 0;try{for(var s,d=this[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var c=o(s.value,2),u=c[0],g=c[1],p=g.length;if(u+p>=e&&u<e+t){var f=V(e,u),y=z(e+t,u+p),h=y-f,m=f-u;0<h&&r.set(g.subarray(m,m+h),f-e)}}}catch(e){l=!0,i=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw i}}return r}},{key:"contains",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=o(a.value,2),d=s[0],c=s[1],u=c.length,g=this.slice(d,u).join().get(d);if(!g||g.length!==u)return!1;for(var p in c)if(c[p]!==g[p])return!1}}catch(e){n=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}return!0}},{key:"size",get:function(){return this._blocks.size}}],[{key:"fromHex",value:function(t){var n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,a=new e,l=0,i=0,s=0;for(ka.lastIndex=0;null!==(n=ka.exec(t));){if(i++,l!==n.index)throw new Error("Malformed hex file: Could not parse between characters "+l+" and "+n.index+" (\""+t.substring(l,z(n.index,l+16)).trim()+"\")");l=ka.lastIndex;var d=n,c=o(d,3),g=c[1],f=c[2],y=new Uint8Array(g.match(/[\da-f]{2}/gi).map(function(e){return parseInt(e,16)})),h=y[0];if(h+4!==y.length)throw new Error("Mismatched record length at record "+i+" ("+n[0].trim()+"), expected "+h+" data bytes but actual length is "+(y.length-4));var m=u(y);if(parseInt(f,16)!==m)throw new Error("Checksum failed at record "+i+" ("+n[0].trim()+"), should be "+m.toString(16));var E=(y[1]<<8)+y[2],_=y[3],S=y.subarray(4);if(0===_){if(a.has(s+E))throw new Error("Duplicated data at record "+i+" ("+n[0].trim()+")");if(65536<E+S.length)throw new Error("Data at record "+i+" ("+n[0].trim()+") wraps over 0xFFFF. This would trigger ambiguous behaviour. Please restructure your data so that for every record the data offset plus the data length do not exceed 0xFFFF.");a.set(s+E,S)}else{if(0!==E)throw new Error("Record "+i+" ("+n[0].trim()+") must have 0000 as data offset.");switch(_){case 1:if(l!==t.length)throw new Error("There is data after an EOF record at record "+i);return a.join(r);case 2:s=(S[0]<<8)+S[1]<<4;break;case 3:break;case 4:s=(S[0]<<8)+S[1]<<16;break;case 5:break;default:throw new Error("Invalid record type 0x"+p(_)+" at record "+i+" (should be between 0x00 and 0x05)");}}}if(i)throw new Error("No EOF record at end of file");else throw new Error("Malformed .hex file, could not parse any registers")}},{key:"overlapMemoryMaps",value:function(e){var t=new Set,n=!0,r=!1,a=void 0;try{for(var s,d=e[Symbol.iterator]();!(n=(s=d.next()).done);n=!0){var c=o(s.value,2),u=c[1],g=!0,p=!1,f=void 0;try{for(var y,h=u[Symbol.iterator]();!(g=(y=h.next()).done);g=!0){var m=o(y.value,2),E=m[0],_=m[1];t.add(E),t.add(E+_.length)}}catch(e){p=!0,f=e}finally{try{g||null==h.return||h.return()}finally{if(p)throw f}}}}catch(e){r=!0,a=e}finally{try{n||null==d.return||d.return()}finally{if(r)throw a}}for(var S=Array.from(t.values()).sort(function(e,t){return e-t}),x=new Map,T=function(t){var n=S[t],r=S[t+1],a=[],l=!0,i=!1,s=void 0;try{for(var d,c=e[Symbol.iterator]();!(l=(d=c.next()).done);l=!0){var u=o(d.value,2),g=u[0],p=u[1],f=Array.from(p.keys()).reduce(function(e,t){return t>n?e:V(e,t)},-1);if(-1!==f){var y=p.get(f),h=n-f;h<y.length&&a.push([g,y.subarray(h,r-f)])}}}catch(e){i=!0,s=e}finally{try{l||null==c.return||c.return()}finally{if(i)throw s}}a.length&&x.set(n,a)},b=0,P=S.length-1;b<P;b++)T(b,P);return x}},{key:"flattenOverlaps",value:function(t){return new e(Array.from(t.entries()).map(function(e){var t=o(e,2),n=t[0],r=t[1];return[n,r[r.length-1][1]]}))}},{key:"fromPaddedUint8Array",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:64;if(!(t instanceof Uint8Array))throw new Error("Bytes passed to fromPaddedUint8Array are not an Uint8Array");for(var a,o=new e,i=0,s=-1,d=0,c=!1,u=t.length,l=0;l<u;l++)a=t[l],a===n?(i++,i>=r&&(-1!==s&&o.set(d,t.subarray(d,s+1)),c=!0)):(c&&(c=!1,d=l),s=l,i=0);return c||-1===s||o.set(d,t.subarray(d,u)),o}}]),e}(),Ia=t(function(e){function t(){}function n(){}(function(){var l=String.fromCharCode;function e(e,t){t=t||1/0;for(var n,r=e.length,a=null,l=[],o=0;o<r;o++){if(n=e.charCodeAt(o),!(55295<n&&57344>n))a&&(-1<(t-=3)&&l.push(239,191,189),a=null);else if(a){if(56320>n){-1<(t-=3)&&l.push(239,191,189),a=n;continue}else n=65536|(a-55296<<10|n-56320),a=null;}else if(56319<n){-1<(t-=3)&&l.push(239,191,189);continue}else if(o+1===r){-1<(t-=3)&&l.push(239,191,189);continue}else{a=n;continue}if(128>n){if(0>(t-=1))break;l.push(n)}else if(2048>n){if(0>(t-=2))break;l.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;l.push(224|n>>12,128|63&n>>6,128|63&n)}else if(2097152>n){if(0>(t-=4))break;l.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}else throw new Error("Invalid code point")}return l}function r(e,t,n){var r="",o="";n=z(e.length,n||1/0),t=t||0;for(var s=t;s<n;s++)127>=e[s]?(r+=a(o)+l(e[s]),o=""):o+="%"+e[s].toString(16);return r+a(o)}function a(e){try{return decodeURIComponent(e)}catch(e){return l(65533)}}t.prototype.encode=function(t){var n;return n="undefined"==typeof Uint8Array?e(t):new Uint8Array(e(t)),n},n.prototype.decode=function(e){return r(e,0,e.length)}})(),e&&(n.TextDecoderLite=n,n.TextEncoderLite=t,e.exports.TextDecoderLite=n,e.exports.TextEncoderLite=t,e.exports=n)}),Aa=Ia.TextDecoderLite,Fa=Ia.TextEncoderLite,Ra=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},Na=an.f,La=function(e){return function(t){for(var n,r=He(t),a=ht(r),l=a.length,o=0,s=[];l>o;)Na.call(r,n=a[o++])&&s.push(e?[n,r[n]]:r[n]);return s}}(!1);be(be.S,"Object",{values:function(e){return La(e)}});var Da;(function(e){e[e.MagicValue=268439552+128+64]="MagicValue",e[e.EndMarker=e.MagicValue+4]="EndMarker",e[e.PageSize=e.EndMarker+4]="PageSize",e[e.StartPage=e.PageSize+4]="StartPage",e[e.PagesUsed=e.StartPage+2]="PagesUsed",e[e.Delimiter=e.PagesUsed+2]="Delimiter",e[e.VersionLocation=e.Delimiter+4]="VersionLocation",e[e.End=e.VersionLocation+4]="End"})(Da||(Da={}));var Ma=1,Ba=128-Ma-1,Ca=120,Ya=function(){function e(e,t){if(this._filename=e,this._filenameBytes=h(e),this._filenameBytes.length>Ca)throw new Error("File name \""+e+"\" is too long "+("(max "+Ca+" characters)."));this._dataBytes=t;var n=this.generateFileHeaderBytes();this._fsDataBytes=new Uint8Array(n.length+this._dataBytes.length),this._fsDataBytes.set(n,0),this._fsDataBytes.set(this._dataBytes,n.length)}return e.prototype.generateFileHeaderBytes=function(){var e=1+1+this._filenameBytes.length,t=(e+this._dataBytes.length)%Ba,n=e-this._filenameBytes.length,r=new Uint8Array(e);r[0]=t,r[1]=this._filenameBytes.length;for(var a=n;a<e;++a)r[a]=this._filenameBytes[a-n];return r},e.prototype.getFsChunks=function(e){var t=[],n=0,r=0,a=new Uint8Array(128).fill(255);a[0]=254;for(var l=z(this._fsDataBytes.length,Ba),o=0;o<l;o++,r++)a[Ma+o]=this._fsDataBytes[r];for(t.push(a);r<this._fsDataBytes.length;){if(n++,n>=e.length)throw new Error("Not enough space for the "+this._filename+" file.");var s=t[t.length-1];s[127]=e[n],a=new Uint8Array(128).fill(255),a[0]=e[n-1],l=z(this._fsDataBytes.length-r,Ba);for(var o=0;o<l;o++,r++)a[Ma+o]=this._fsDataBytes[r];t.push(a)}return t},e.prototype.getFsBytes=function(e){for(var t=this.getFsChunks(e),n=128*t.length,r=new Uint8Array(n),a=0;a<t.length;a++)r.set(t[a],128*a);return r},e.prototype.getFsFileSize=function(){var e=W(this._fsDataBytes.length/Ba);return this._fsDataBytes.length%Ba||(e+=1),128*e},e}(),Ua=function(){function e(e,t){if(!e)throw new Error("File was not provided a valid filename.");if(!t)throw new Error("File "+e+" does not have valid content.");if(this.filename=e,"string"==typeof t)this._dataBytes=h(t);else if(t instanceof Uint8Array)this._dataBytes=t;else throw new Error("File data type must be a string or Uint8Array.")}return e.prototype.getText=function(){return m(this._dataBytes)},e.prototype.getBytes=function(){return this._dataBytes},e}(),Ha=function(){function e(e){if(this._files={},this._intelHex=e,this.importFilesFromIntelHex(this._intelHex),this.ls().length)throw new Error("There are files in the MicropythonFsHex constructor hex file input.")}return e.prototype.create=function(e,t){if(this.exists(e))throw new Error("File already exists.");this.write(e,t)},e.prototype.write=function(e,t){this._files[e]=new Ua(e,t)},e.prototype.append=function(e){if(!e)throw new Error("Invalid filename.");if(!this.exists(e))throw new Error("File \""+e+"\" does not exist.");throw new Error("Append operation not yet implemented.")},e.prototype.read=function(e){if(!e)throw new Error("Invalid filename.");if(!this.exists(e))throw new Error("File \""+e+"\" does not exist.");return this._files[e].getText()},e.prototype.readBytes=function(e){if(!e)throw new Error("Invalid filename.");if(!this.exists(e))throw new Error("File \""+e+"\" does not exist.");return this._files[e].getBytes()},e.prototype.remove=function(e){if(!e)throw new Error("Invalid filename.");if(!this.exists(e))throw new Error("File \""+e+"\" does not exist.");delete this._files[e]},e.prototype.exists=function(e){return this._files.hasOwnProperty(e)},e.prototype.size=function(e){if(!e)throw new Error("Invalid filename.");if(!this.exists(e))throw new Error("File \""+e+"\" does not exist.");return B(this._files[e].filename,this._files[e].getBytes())},e.prototype.ls=function(){var e=[];return Object.values(this._files).forEach(function(t){return e.push(t.filename)}),e},e.prototype.getStorageSize=function(){return H(this._intelHex)},e.prototype.getStorageUsed=function(){var e=this,t=0;return Object.values(this._files).forEach(function(n){return t+=e.size(n.filename)}),t},e.prototype.getStorageRemaining=function(){var e=this,t=0,n=this.getStorageSize();return Object.values(this._files).forEach(function(n){return t+=e.size(n.filename)}),n-t},e.prototype.importFilesFromIntelHex=function(e,t){var n=this,r=void 0===t?{}:t,a=r.overwrite,l=r.formatFirst,o=U(e);void 0!==l&&l&&(delete this._files,this._files={});var i=[];if(Object.keys(o).forEach(function(e){!(void 0!==a&&a)&&n.exists(e)?i.push(e):n.write(e,o[e])}),i.length)throw new Error("Files \"\" from hex already exists.");return Object.keys(o)},e.prototype.getIntelHex=function(e){var t=e||this._intelHex,n={};return Object.values(this._files).forEach(function(e){n[e.filename]=e.getBytes()}),Y(t,n)},e}();e.addIntelHexAppendedScript=function(e,t){var n=h(t),r=E(n);if(8192<r.length)throw new RangeError("Too long");var a=y(e),l=Oa.fromHex(a);return l.set(253952,r),l.asHexString()+"\n"},e.getIntelHexAppendedScript=function(e){var t="",n=Oa.fromHex(e);if(n.has(253952)){var r=n.slice(253952,8192),a=r.get(253952);a[0]===77&&a[1]===80&&(t=m(a.slice(4)),t=t.replace(/\0/g,""))}return t},e.isAppendedScriptPresent=_,e.MicropythonFsHex=Ha,e.getHexMapUicrData=A,e.getIntelHexUicrData=function(e){return A(Oa.fromHex(e))},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=microbit-fs.umd.min.js.map
