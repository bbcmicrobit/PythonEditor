!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).microbitFs={})}(this,(function(t){"use strict";function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=function(t){try{return!!t()}catch(e){return!0}},n=!r((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),i=e((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),o=e((function(t){var e=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)})),a=(o.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),u=function(t){if(!a(t))throw TypeError(t+" is not an object!");return t},s=i.document,f=a(s)&&a(s.createElement),c=function(t){return f?s.createElement(t):{}},l=!n&&!r((function(){return 7!=Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a})),h=function(t,e){if(!a(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!a(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!a(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!a(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},d=Object.defineProperty,g={f:n?Object.defineProperty:function(t,e,r){if(u(t),e=h(e,!0),u(r),l)try{return d(t,e,r)}catch(n){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},v=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},p=n?function(t,e,r){return g.f(t,e,v(1,r))}:function(t,e,r){return t[e]=r,t},y={}.hasOwnProperty,w=function(t,e){return y.call(t,e)},m=0,b=Math.random(),E=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++m+b).toString(36))},S=e((function(t){var e="__core-js_shared__",r=i[e]||(i[e]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:o.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),x=S("native-function-to-string",Function.toString),A=e((function(t){var e=E("src"),r="toString",n=(""+x).split(r);o.inspectSource=function(t){return x.call(t)},(t.exports=function(t,r,o,a){var u="function"==typeof o;u&&(w(o,"name")||p(o,"name",r)),t[r]!==o&&(u&&(w(o,e)||p(o,e,t[r]?""+t[r]:n.join(String(r)))),t===i?t[r]=o:a?t[r]?t[r]=o:p(t,r,o):(delete t[r],p(t,r,o)))})(Function.prototype,r,(function(){return"function"==typeof this&&this[e]||x.call(this)}))})),F=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},_=function(t,e,r){if(F(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}},k=function(t,e,r){var n,a,u,s,f=t&k.F,c=t&k.G,l=t&k.S,h=t&k.P,d=t&k.B,g=c?i:l?i[e]||(i[e]={}):(i[e]||{}).prototype,v=c?o:o[e]||(o[e]={}),y=v.prototype||(v.prototype={});for(n in c&&(r=e),r)u=((a=!f&&g&&void 0!==g[n])?g:r)[n],s=d&&a?_(u,i):h&&"function"==typeof u?_(Function.call,u):u,g&&A(g,n,u,t&k.U),v[n]!=u&&p(v,n,s),h&&y[n]!=u&&(y[n]=u)};i.core=o,k.F=1,k.G=2,k.S=4,k.P=8,k.B=16,k.W=32,k.U=64,k.R=128;for(var I,P=k,M=E("typed_array"),O=E("view"),B=!(!i.ArrayBuffer||!i.DataView),U=B,j=0,C="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");j<9;)(I=i[C[j++]])?(p(I.prototype,M,!0),p(I.prototype,O,!0)):U=!1;var D={ABV:B,CONSTR:U,TYPED:M,VIEW:O},L=function(t,e,r){for(var n in e)A(t,n,e[n],r);return t},T=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t},H=Math.ceil,R=Math.floor,z=function(t){return isNaN(t=+t)?0:(t>0?R:H)(t)},N=Math.min,V=function(t){return t>0?N(z(t),9007199254740991):0},W=function(t){if(void 0===t)return 0;var e=z(t),r=V(e);if(e!==r)throw RangeError("Wrong length!");return r},G={}.toString,Y=function(t){return G.call(t).slice(8,-1)},$=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Y(t)?t.split(""):Object(t)},K=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},q=function(t){return $(K(t))},J=Math.max,X=Math.min,Q=function(t,e){return(t=z(t))<0?J(t+e,0):X(t,e)},Z=function(t){return function(e,r,n){var i,o=q(e),a=V(o.length),u=Q(n,a);if(t&&r!=r){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((t||u in o)&&o[u]===r)return t||u||0;return!t&&-1}},tt=S("keys"),et=function(t){return tt[t]||(tt[t]=E(t))},rt=Z(!1),nt=et("IE_PROTO"),it=function(t,e){var r,n=q(t),i=0,o=[];for(r in n)r!=nt&&w(n,r)&&o.push(r);for(;e.length>i;)w(n,r=e[i++])&&(~rt(o,r)||o.push(r));return o},ot="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),at=ot.concat("length","prototype"),ut={f:Object.getOwnPropertyNames||function(t){return it(t,at)}},st=function(t){return Object(K(t))},ft=function(t){for(var e=st(this),r=V(e.length),n=arguments.length,i=Q(n>1?arguments[1]:void 0,r),o=n>2?arguments[2]:void 0,a=void 0===o?r:Q(o,r);a>i;)e[i++]=t;return e},ct=e((function(t){var e=S("wks"),r=i.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:E)("Symbol."+t))}).store=e})),lt=g.f,ht=ct("toStringTag"),dt=function(t,e,r){t&&!w(t=r?t:t.prototype,ht)&&lt(t,ht,{configurable:!0,value:e})},gt=e((function(t,e){var o=ut.f,a=g.f,u="ArrayBuffer",s="DataView",f="Wrong index!",c=i.ArrayBuffer,l=i.DataView,h=i.Math,d=i.RangeError,v=i.Infinity,y=c,w=h.abs,m=h.pow,b=h.floor,E=h.log,S=h.LN2,x="buffer",A="byteLength",F="byteOffset",_=n?"_b":x,k=n?"_l":A,I=n?"_o":F;function P(t,e,r){var n,i,o,a=new Array(r),u=8*r-e-1,s=(1<<u)-1,f=s>>1,c=23===e?m(2,-24)-m(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for((t=w(t))!=t||t===v?(i=t!=t?1:0,n=s):(n=b(E(t)/S),t*(o=m(2,-n))<1&&(n--,o*=2),(t+=n+f>=1?c/o:c*m(2,1-f))*o>=2&&(n++,o/=2),n+f>=s?(i=0,n=s):n+f>=1?(i=(t*o-1)*m(2,e),n+=f):(i=t*m(2,f-1)*m(2,e),n=0));e>=8;a[l++]=255&i,i/=256,e-=8);for(n=n<<e|i,u+=e;u>0;a[l++]=255&n,n/=256,u-=8);return a[--l]|=128*h,a}function M(t,e,r){var n,i=8*r-e-1,o=(1<<i)-1,a=o>>1,u=i-7,s=r-1,f=t[s--],c=127&f;for(f>>=7;u>0;c=256*c+t[s],s--,u-=8);for(n=c&(1<<-u)-1,c>>=-u,u+=e;u>0;n=256*n+t[s],s--,u-=8);if(0===c)c=1-a;else{if(c===o)return n?NaN:f?-v:v;n+=m(2,e),c-=a}return(f?-1:1)*n*m(2,c-e)}function O(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function B(t){return[255&t]}function U(t){return[255&t,t>>8&255]}function j(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function C(t){return P(t,52,8)}function H(t){return P(t,23,4)}function R(t,e,r){a(t.prototype,e,{get:function(){return this[r]}})}function N(t,e,r,n){var i=W(+r);if(i+e>t[k])throw d(f);var o=t[_]._b,a=i+t[I],u=o.slice(a,a+e);return n?u:u.reverse()}function G(t,e,r,n,i,o){var a=W(+r);if(a+e>t[k])throw d(f);for(var u=t[_]._b,s=a+t[I],c=n(+i),l=0;l<e;l++)u[s+l]=c[o?l:e-l-1]}if(D.ABV){if(!r((function(){c(1)}))||!r((function(){new c(-1)}))||r((function(){return new c,new c(1.5),new c(NaN),c.name!=u}))){for(var Y,$=(c=function(t){return T(this,c),new y(W(t))}).prototype=y.prototype,K=o(y),q=0;K.length>q;)(Y=K[q++])in c||p(c,Y,y[Y]);$.constructor=c}var J=new l(new c(2)),X=l.prototype.setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||L(l.prototype,{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},!0)}else c=function(t){T(this,c,u);var e=W(t);this._b=ft.call(new Array(e),0),this[k]=e},l=function(t,e,r){T(this,l,s),T(t,c,s);var n=t[k],i=z(e);if(i<0||i>n)throw d("Wrong offset!");if(i+(r=void 0===r?n-i:V(r))>n)throw d("Wrong length!");this[_]=t,this[I]=i,this[k]=r},n&&(R(c,A,"_l"),R(l,x,"_b"),R(l,A,"_l"),R(l,F,"_o")),L(l.prototype,{getInt8:function(t){return N(this,1,t)[0]<<24>>24},getUint8:function(t){return N(this,1,t)[0]},getInt16:function(t){var e=N(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=N(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return O(N(this,4,t,arguments[1]))},getUint32:function(t){return O(N(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return M(N(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return M(N(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){G(this,1,t,B,e)},setUint8:function(t,e){G(this,1,t,B,e)},setInt16:function(t,e){G(this,2,t,U,e,arguments[2])},setUint16:function(t,e){G(this,2,t,U,e,arguments[2])},setInt32:function(t,e){G(this,4,t,j,e,arguments[2])},setUint32:function(t,e){G(this,4,t,j,e,arguments[2])},setFloat32:function(t,e){G(this,4,t,H,e,arguments[2])},setFloat64:function(t,e){G(this,8,t,C,e,arguments[2])}});dt(c,u),dt(l,s),p(l.prototype,D.VIEW,!0),e.ArrayBuffer=c,e.DataView=l})),vt=ct("toStringTag"),pt="Arguments"==Y(function(){return arguments}()),yt=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(r){}}(e=Object(t),vt))?r:pt?Y(e):"Object"==(n=Y(e))&&"function"==typeof e.callee?"Arguments":n},wt={},mt=ct("iterator"),bt=Array.prototype,Et=function(t){return void 0!==t&&(wt.Array===t||bt[mt]===t)},St=Object.keys||function(t){return it(t,ot)},xt=n?Object.defineProperties:function(t,e){u(t);for(var r,n=St(e),i=n.length,o=0;i>o;)g.f(t,r=n[o++],e[r]);return t},At=i.document,Ft=At&&At.documentElement,_t=et("IE_PROTO"),kt=function(){},It=function(){var t,e=c("iframe"),r=ot.length;for(e.style.display="none",Ft.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),It=t.F;r--;)delete It.prototype[ot[r]];return It()},Pt=Object.create||function(t,e){var r;return null!==t?(kt.prototype=u(t),r=new kt,kt.prototype=null,r[_t]=t):r=It(),void 0===e?r:xt(r,e)},Mt=et("IE_PROTO"),Ot=Object.prototype,Bt=Object.getPrototypeOf||function(t){return t=st(t),w(t,Mt)?t[Mt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ot:null},Ut=ct("iterator"),jt=o.getIteratorMethod=function(t){if(null!=t)return t[Ut]||t["@@iterator"]||wt[yt(t)]},Ct=Array.isArray||function(t){return"Array"==Y(t)},Dt=ct("species"),Lt=function(t,e){return new(function(t){var e;return Ct(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Ct(e.prototype)||(e=void 0),a(e)&&null===(e=e[Dt])&&(e=void 0)),void 0===e?Array:e}(t))(e)},Tt=function(t,e){var r=1==t,n=2==t,i=3==t,o=4==t,a=6==t,u=5==t||a,s=e||Lt;return function(e,f,c){for(var l,h,d=st(e),g=$(d),v=_(f,c,3),p=V(g.length),y=0,w=r?s(e,p):n?s(e,0):void 0;p>y;y++)if((u||y in g)&&(h=v(l=g[y],y,d),t))if(r)w[y]=h;else if(h)switch(t){case 3:return!0;case 5:return l;case 6:return y;case 2:w.push(l)}else if(o)return!1;return a?-1:i||o?o:w}},Ht=ct("species"),Rt=function(t,e){var r,n=u(t).constructor;return void 0===n||null==(r=u(n)[Ht])?e:F(r)},zt=ct("unscopables"),Nt=Array.prototype;null==Nt[zt]&&p(Nt,zt,{});var Vt=function(t){Nt[zt][t]=!0},Wt=function(t,e){return{value:e,done:!!t}},Gt={};p(Gt,ct("iterator"),(function(){return this}));var Yt=function(t,e,r){t.prototype=Pt(Gt,{next:v(1,r)}),dt(t,e+" Iterator")},$t=ct("iterator"),Kt=!([].keys&&"next"in[].keys()),qt="keys",Jt="values",Xt=function(){return this},Qt=function(t,e,r,n,i,o,a){Yt(r,e,n);var u,s,f,c=function(t){if(!Kt&&t in g)return g[t];switch(t){case qt:case Jt:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=e+" Iterator",h=i==Jt,d=!1,g=t.prototype,v=g[$t]||g["@@iterator"]||i&&g[i],y=v||c(i),w=i?h?c("entries"):y:void 0,m="Array"==e&&g.entries||v;if(m&&(f=Bt(m.call(new t)))!==Object.prototype&&f.next&&(dt(f,l,!0),"function"!=typeof f[$t]&&p(f,$t,Xt)),h&&v&&v.name!==Jt&&(d=!0,y=function(){return v.call(this)}),(Kt||d||!g[$t])&&p(g,$t,y),wt[e]=y,wt[l]=Xt,i)if(u={values:h?y:c(Jt),keys:o?y:c(qt),entries:w},a)for(s in u)s in g||A(g,s,u[s]);else P(P.P+P.F*(Kt||d),e,u);return u},Zt=Qt(Array,"Array",(function(t,e){this._t=q(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,Wt(1)):Wt(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])}),"values");wt.Arguments=wt.Array,Vt("keys"),Vt("values"),Vt("entries");var te=ct("iterator"),ee=!1;try{var re=[7][te]();re.return=function(){ee=!0},Array.from(re,(function(){throw 2}))}catch(Ao){}var ne=function(t,e){if(!e&&!ee)return!1;var r=!1;try{var n=[7],i=n[te]();i.next=function(){return{done:r=!0}},n[te]=function(){return i},t(n)}catch(Ao){}return r},ie=ct("species"),oe=function(t){var e=i[t];n&&e&&!e[ie]&&g.f(e,ie,{configurable:!0,get:function(){return this}})},ae=[].copyWithin||function(t,e){var r=st(this),n=V(r.length),i=Q(t,n),o=Q(e,n),a=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===a?n:Q(a,n))-o,n-i),s=1;for(o<i&&i<o+u&&(s=-1,o+=u-1,i+=u-1);u-- >0;)o in r?r[i]=r[o]:delete r[i],i+=s,o+=s;return r},ue={f:{}.propertyIsEnumerable},se=Object.getOwnPropertyDescriptor,fe={f:n?se:function(t,e){if(t=q(t),e=h(e,!0),l)try{return se(t,e)}catch(Ao){}if(w(t,e))return v(!ue.f.call(t,e),t[e])}},ce=e((function(t){if(n){var e=i,o=r,u=P,s=D,f=gt,c=_,l=T,d=v,y=p,m=L,b=z,S=V,x=W,A=Q,F=h,k=w,I=yt,M=a,O=st,B=Et,U=Pt,j=Bt,C=ut.f,H=jt,R=E,N=ct,G=Tt,Y=Z,$=Rt,K=Zt,q=wt,J=ne,X=oe,tt=ft,et=ae,rt=g,nt=fe,it=rt.f,ot=nt.f,at=e.RangeError,lt=e.TypeError,ht=e.Uint8Array,dt="ArrayBuffer",vt="SharedArrayBuffer",pt="BYTES_PER_ELEMENT",mt=Array.prototype,bt=f.ArrayBuffer,St=f.DataView,xt=G(0),At=G(2),Ft=G(3),_t=G(4),kt=G(5),It=G(6),Mt=Y(!0),Ot=Y(!1),Ut=K.values,Ct=K.keys,Dt=K.entries,Lt=mt.lastIndexOf,Ht=mt.reduce,zt=mt.reduceRight,Nt=mt.join,Vt=mt.sort,Wt=mt.slice,Gt=mt.toString,Yt=mt.toLocaleString,$t=N("iterator"),Kt=N("toStringTag"),qt=R("typed_constructor"),Jt=R("def_constructor"),Xt=s.CONSTR,Qt=s.TYPED,te=s.VIEW,ee="Wrong length!",re=G(1,(function(t,e){return le($(t,t[Jt]),e)})),ie=o((function(){return 1===new ht(new Uint16Array([1]).buffer)[0]})),ue=!!ht&&!!ht.prototype.set&&o((function(){new ht(1).set({})})),se=function(t,e){var r=b(t);if(r<0||r%e)throw at("Wrong offset!");return r},ce=function(t){if(M(t)&&Qt in t)return t;throw lt(t+" is not a typed array!")},le=function(t,e){if(!M(t)||!(qt in t))throw lt("It is not a typed array constructor!");return new t(e)},he=function(t,e){return de($(t,t[Jt]),e)},de=function(t,e){for(var r=0,n=e.length,i=le(t,n);n>r;)i[r]=e[r++];return i},ge=function(t,e,r){it(t,e,{get:function(){return this._d[r]}})},ve=function(t){var e,r,n,i,o,a,u=O(t),s=arguments.length,f=s>1?arguments[1]:void 0,l=void 0!==f,h=H(u);if(null!=h&&!B(h)){for(a=h.call(u),n=[],e=0;!(o=a.next()).done;e++)n.push(o.value);u=n}for(l&&s>2&&(f=c(f,arguments[2],2)),e=0,r=S(u.length),i=le(this,r);r>e;e++)i[e]=l?f(u[e],e):u[e];return i},pe=function(){for(var t=0,e=arguments.length,r=le(this,e);e>t;)r[t]=arguments[t++];return r},ye=!!ht&&o((function(){Yt.call(new ht(1))})),we=function(){return Yt.apply(ye?Wt.call(ce(this)):ce(this),arguments)},me={copyWithin:function(t,e){return et.call(ce(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return _t(ce(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return tt.apply(ce(this),arguments)},filter:function(t){return he(this,At(ce(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return kt(ce(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return It(ce(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){xt(ce(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return Ot(ce(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return Mt(ce(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return Nt.apply(ce(this),arguments)},lastIndexOf:function(t){return Lt.apply(ce(this),arguments)},map:function(t){return re(ce(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return Ht.apply(ce(this),arguments)},reduceRight:function(t){return zt.apply(ce(this),arguments)},reverse:function(){for(var t,e=this,r=ce(e).length,n=Math.floor(r/2),i=0;i<n;)t=e[i],e[i++]=e[--r],e[r]=t;return e},some:function(t){return Ft(ce(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return Vt.call(ce(this),t)},subarray:function(t,e){var r=ce(this),n=r.length,i=A(t,n);return new($(r,r[Jt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,S((void 0===e?n:A(e,n))-i))}},be=function(t,e){return he(this,Wt.call(ce(this),t,e))},Ee=function(t){ce(this);var e=se(arguments[1],1),r=this.length,n=O(t),i=S(n.length),o=0;if(i+e>r)throw at(ee);for(;o<i;)this[e+o]=n[o++]},Se={entries:function(){return Dt.call(ce(this))},keys:function(){return Ct.call(ce(this))},values:function(){return Ut.call(ce(this))}},xe=function(t,e){return M(t)&&t[Qt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ae=function(t,e){return xe(t,e=F(e,!0))?d(2,t[e]):ot(t,e)},Fe=function(t,e,r){return!(xe(t,e=F(e,!0))&&M(r)&&k(r,"value"))||k(r,"get")||k(r,"set")||r.configurable||k(r,"writable")&&!r.writable||k(r,"enumerable")&&!r.enumerable?it(t,e,r):(t[e]=r.value,t)};Xt||(nt.f=Ae,rt.f=Fe),u(u.S+u.F*!Xt,"Object",{getOwnPropertyDescriptor:Ae,defineProperty:Fe}),o((function(){Gt.call({})}))&&(Gt=Yt=function(){return Nt.call(this)});var _e=m({},me);m(_e,Se),y(_e,$t,Se.values),m(_e,{slice:be,set:Ee,constructor:function(){},toString:Gt,toLocaleString:we}),ge(_e,"buffer","b"),ge(_e,"byteOffset","o"),ge(_e,"byteLength","l"),ge(_e,"length","e"),it(_e,Kt,{get:function(){return this[Qt]}}),t.exports=function(t,r,n,i){var a=t+((i=!!i)?"Clamped":"")+"Array",f="get"+t,c="set"+t,h=e[a],d=h||{},g=h&&j(h),v=!h||!s.ABV,p={},w=h&&h.prototype,m=function(t,e){it(t,e,{get:function(){return function(t,e){var n=t._d;return n.v[f](e*r+n.o,ie)}(this,e)},set:function(t){return function(t,e,n){var o=t._d;i&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),o.v[c](e*r+o.o,n,ie)}(this,e,t)},enumerable:!0})};v?(h=n((function(t,e,n,i){l(t,h,a,"_d");var o,u,s,f,c=0,d=0;if(M(e)){if(!(e instanceof bt||(f=I(e))==dt||f==vt))return Qt in e?de(h,e):ve.call(h,e);o=e,d=se(n,r);var g=e.byteLength;if(void 0===i){if(g%r)throw at(ee);if((u=g-d)<0)throw at(ee)}else if((u=S(i)*r)+d>g)throw at(ee);s=u/r}else s=x(e),o=new bt(u=s*r);for(y(t,"_d",{b:o,o:d,l:u,e:s,v:new St(o)});c<s;)m(t,c++)})),w=h.prototype=U(_e),y(w,"constructor",h)):o((function(){h(1)}))&&o((function(){new h(-1)}))&&J((function(t){new h,new h(null),new h(1.5),new h(t)}),!0)||(h=n((function(t,e,n,i){var o;return l(t,h,a),M(e)?e instanceof bt||(o=I(e))==dt||o==vt?void 0!==i?new d(e,se(n,r),i):void 0!==n?new d(e,se(n,r)):new d(e):Qt in e?de(h,e):ve.call(h,e):new d(x(e))})),xt(g!==Function.prototype?C(d).concat(C(g)):C(d),(function(t){t in h||y(h,t,d[t])})),h.prototype=w,w.constructor=h);var b=w[$t],E=!!b&&("values"==b.name||null==b.name),A=Se.values;y(h,qt,!0),y(w,Qt,a),y(w,te,!0),y(w,Jt,h),(i?new h(1)[Kt]==a:Kt in w)||it(w,Kt,{get:function(){return a}}),p[a]=h,u(u.G+u.W+u.F*(h!=d),p),u(u.S,a,{BYTES_PER_ELEMENT:r}),u(u.S+u.F*o((function(){d.of.call(h,1)})),a,{from:ve,of:pe}),pt in w||y(w,pt,r),u(u.P,a,me),X(a),u(u.P+u.F*ue,a,{set:Ee}),u(u.P+u.F*!E,a,Se),w.toString!=Gt&&(w.toString=Gt),u(u.P+u.F*o((function(){new h(1).slice()})),a,{slice:be}),u(u.P+u.F*(o((function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()}))||!o((function(){w.toLocaleString.call([1,2])}))),a,{toLocaleString:we}),q[a]=E?b:A,E||y(w,$t,A)}}else t.exports=function(){}}));ce("Uint8",1,(function(t){return function(e,r,n){return t(this,e,r,n)}})),P(P.P,"Array",{fill:ft}),Vt("fill");var le,he,de=function(t){return function(e,r){var n,i,o=String(K(e)),a=z(r),u=o.length;return a<0||a>=u?t?"":void 0:(n=o.charCodeAt(a))<55296||n>56319||a+1===u||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):n:t?o.slice(a,a+2):i-56320+(n-55296<<10)+65536}},ge=de(!0),ve=function(t,e,r){return e+(r?ge(t,e).length:1)},pe=RegExp.prototype.exec,ye=function(t,e){var r=t.exec;if("function"==typeof r){var n=r.call(t,e);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==yt(t))throw new TypeError("RegExp#exec called on incompatible receiver");return pe.call(t,e)},we=function(){var t=u(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},me=RegExp.prototype.exec,be=String.prototype.replace,Ee=me,Se=(le=/a/,he=/b*/g,me.call(le,"a"),me.call(he,"a"),0!==le.lastIndex||0!==he.lastIndex),xe=void 0!==/()??/.exec("")[1];(Se||xe)&&(Ee=function(t){var e,r,n,i,o=this;return xe&&(r=new RegExp("^"+o.source+"$(?!\\s)",we.call(o))),Se&&(e=o.lastIndex),n=me.call(o,t),Se&&n&&(o.lastIndex=o.global?n.index+n[0].length:e),xe&&n&&n.length>1&&be.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n});var Ae=Ee;P({target:"RegExp",proto:!0,forced:Ae!==/./.exec},{exec:Ae});var Fe=ct("species"),_e=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),ke=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}(),Ie=function(t,e,n){var i=ct(t),o=!r((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o?!r((function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},"split"===t&&(r.constructor={},r.constructor[Fe]=function(){return r}),r[i](""),!e})):void 0;if(!o||!a||"replace"===t&&!_e||"split"===t&&!ke){var u=/./[i],s=n(K,i,""[t],(function(t,e,r,n,i){return e.exec===Ae?o&&!i?{done:!0,value:u.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}})),f=s[0],c=s[1];A(String.prototype,t,f),p(RegExp.prototype,i,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)})}},Pe=Math.max,Me=Math.min,Oe=Math.floor,Be=/\$([$&`']|\d\d?|<[^>]*>)/g,Ue=/\$([$&`']|\d\d?)/g;Ie("replace",2,(function(t,e,r,n){return[function(n,i){var o=t(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},function(t,e){var o=n(r,t,this,e);if(o.done)return o.value;var a=u(t),s=String(this),f="function"==typeof e;f||(e=String(e));var c=a.global;if(c){var l=a.unicode;a.lastIndex=0}for(var h=[];;){var d=ye(a,s);if(null===d)break;if(h.push(d),!c)break;""===String(d[0])&&(a.lastIndex=ve(s,V(a.lastIndex),l))}for(var g,v="",p=0,y=0;y<h.length;y++){d=h[y];for(var w=String(d[0]),m=Pe(Me(z(d.index),s.length),0),b=[],E=1;E<d.length;E++)b.push(void 0===(g=d[E])?g:String(g));var S=d.groups;if(f){var x=[w].concat(b,m,s);void 0!==S&&x.push(S);var A=String(e.apply(void 0,x))}else A=i(w,s,m,b,S,e);m>=p&&(v+=s.slice(p,m)+A,p=m+w.length)}return v+s.slice(p)}];function i(t,e,n,i,o,a){var u=n+t.length,s=i.length,f=Ue;return void 0!==o&&(o=st(o),f=Be),r.call(a,f,(function(r,a){var f;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(u);case"<":f=o[a.slice(1,-1)];break;default:var c=+a;if(0===c)return r;if(c>s){var l=Oe(c/10);return 0===l?r:l<=s?void 0===i[l-1]?a.charAt(1):i[l-1]+a.charAt(1):r}f=i[c-1]}return void 0===f?"":f}))}}));var je=function(t,e,r,n){try{return n?e(u(r)[0],r[1]):e(r)}catch(Ao){var i=t.return;throw void 0!==i&&u(i.call(t)),Ao}},Ce=e((function(t){var e={},r={},n=t.exports=function(t,n,i,o,a){var s,f,c,l,h=a?function(){return t}:jt(t),d=_(i,o,n?2:1),g=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(Et(h)){for(s=V(t.length);s>g;g++)if((l=n?d(u(f=t[g])[0],f[1]):d(t[g]))===e||l===r)return l}else for(c=h.call(t);!(f=c.next()).done;)if((l=je(c,d,f.value,n))===e||l===r)return l};n.BREAK=e,n.RETURN=r})),De=e((function(t){var e=E("meta"),n=g.f,i=0,o=Object.isExtensible||function(){return!0},u=!r((function(){return o(Object.preventExtensions({}))})),s=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},f=t.exports={KEY:e,NEED:!1,fastKey:function(t,r){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!w(t,e)){if(!o(t))return"F";if(!r)return"E";s(t)}return t[e].i},getWeak:function(t,r){if(!w(t,e)){if(!o(t))return!0;if(!r)return!1;s(t)}return t[e].w},onFreeze:function(t){return u&&f.NEED&&o(t)&&!w(t,e)&&s(t),t}}})),Le=(De.KEY,De.NEED,De.fastKey,De.getWeak,De.onFreeze,function(t,e){if(!a(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}),Te=g.f,He=De.fastKey,Re=n?"_s":"size",ze=function(t,e){var r,n=He(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r},Ne={getConstructor:function(t,e,r,i){var o=t((function(t,n){T(t,o,e,"_i"),t._t=e,t._i=Pt(null),t._f=void 0,t._l=void 0,t[Re]=0,null!=n&&Ce(n,r,t[i],t)}));return L(o.prototype,{clear:function(){for(var t=Le(this,e),r=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];t._f=t._l=void 0,t[Re]=0},delete:function(t){var r=Le(this,e),n=ze(r,t);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[Re]--}return!!n},forEach:function(t){Le(this,e);for(var r,n=_(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!ze(Le(this,e),t)}}),n&&Te(o.prototype,"size",{get:function(){return Le(this,e)[Re]}}),o},def:function(t,e,r){var n,i,o=ze(t,e);return o?o.v=r:(t._l=o={i:i=He(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[Re]++,"F"!==i&&(t._i[i]=o)),t},getEntry:ze,setStrong:function(t,e,r){Qt(t,e,(function(t,r){this._t=Le(t,e),this._k=r,this._l=void 0}),(function(){for(var t=this,e=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?Wt(0,"keys"==e?r.k:"values"==e?r.v:[r.k,r.v]):(t._t=void 0,Wt(1))}),r?"entries":"values",!r,!0),oe(e)}},Ve=function(t,e){if(u(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},We={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=_(Function.call,fe.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(Ao){e=!0}return function(t,n){return Ve(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:Ve}.set,Ge=function(t,e,r){var n,i=e.constructor;return i!==r&&"function"==typeof i&&(n=i.prototype)!==r.prototype&&a(n)&&We&&We(t,n),t},Ye=function(t,e,n,o,u,s){var f=i[t],c=f,l=u?"set":"add",h=c&&c.prototype,d={},g=function(t){var e=h[t];A(h,t,"delete"==t||"has"==t?function(t){return!(s&&!a(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return s&&!a(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof c&&(s||h.forEach&&!r((function(){(new c).entries().next()})))){var v=new c,p=v[l](s?{}:-0,1)!=v,y=r((function(){v.has(1)})),w=ne((function(t){new c(t)})),m=!s&&r((function(){for(var t=new c,e=5;e--;)t[l](e,e);return!t.has(-0)}));w||((c=e((function(e,r){T(e,c,t);var n=Ge(new f,e,c);return null!=r&&Ce(r,u,n[l],n),n}))).prototype=h,h.constructor=c),(y||m)&&(g("delete"),g("has"),u&&g("get")),(m||p)&&g(l),s&&h.clear&&delete h.clear}else c=o.getConstructor(e,t,u,l),L(c.prototype,n),De.NEED=!0;return dt(c,t),d[t]=c,P(P.G+P.W+P.F*(c!=f),d),s||o.setStrong(c,t,u),c};Ye("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return Ne.def(Le(this,"Set"),t=0===t?0:t,t)}},Ne);function $e(t){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(t,e)||Je(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(t,e){if(t){if("string"==typeof t)return Xe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xe(t,e):void 0}}function Xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qe(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Je(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}Ie("match",1,(function(t,e,r,n){return[function(r){var n=t(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},function(t){var e=n(r,t,this);if(e.done)return e.value;var i=u(t),o=String(this);if(!i.global)return ye(i,o);var a=i.unicode;i.lastIndex=0;for(var s,f=[],c=0;null!==(s=ye(i,o));){var l=String(s[0]);f[c]=l,""===l&&(i.lastIndex=ve(o,V(i.lastIndex),a)),c++}return 0===c?null:f}]}));var Ze=function(t,e,r){e in t?g.f(t,e,v(0,r)):t[e]=r};P(P.S+P.F*!ne((function(t){Array.from(t)})),"Array",{from:function(t){var e,r,n,i,o=st(t),a="function"==typeof this?this:Array,u=arguments.length,s=u>1?arguments[1]:void 0,f=void 0!==s,c=0,l=jt(o);if(f&&(s=_(s,u>2?arguments[2]:void 0,2)),null==l||a==Array&&Et(l))for(r=new a(e=V(o.length));e>c;c++)Ze(r,c,f?s(o[c],c):o[c]);else for(i=l.call(o),r=new a;!(n=i.next()).done;c++)Ze(r,c,f?je(i,s,[n.value,c],!0):n.value);return r.length=c,r}});var tr,er,rr=[].sort,nr=[1,2,3];P(P.P+P.F*(r((function(){nr.sort(void 0)}))||!r((function(){nr.sort(null)}))||!((tr=rr)&&r((function(){er?tr.call(null,(function(){}),1):tr.call(null)})))),"Array",{sort:function(t){return void 0===t?rr.call(st(this)):rr.call(st(this),F(t))}});var ir,or,ar,ur;ir="keys",or=function(){return function(t){return St(st(t))}},ar=(o.Object||{})[ir]||Object[ir],(ur={})[ir]=or(ar),P(P.S+P.F*r((function(){ar(1)})),"Object",ur);var sr={f:ct},fr=g.f,cr=function(t){var e=o.Symbol||(o.Symbol=i.Symbol||{});"_"==t.charAt(0)||t in e||fr(e,t,{value:sr.f(t)})};cr("asyncIterator");var lr={f:Object.getOwnPropertySymbols},hr=ut.f,dr={}.toString,gr="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],vr={f:function(t){return gr&&"[object Window]"==dr.call(t)?function(t){try{return hr(t)}catch(Ao){return gr.slice()}}(t):hr(q(t))}},pr=De.KEY,yr=fe.f,wr=g.f,mr=vr.f,br=i.Symbol,Er=i.JSON,Sr=Er&&Er.stringify,xr=ct("_hidden"),Ar=ct("toPrimitive"),Fr={}.propertyIsEnumerable,_r=S("symbol-registry"),kr=S("symbols"),Ir=S("op-symbols"),Pr=Object.prototype,Mr="function"==typeof br&&!!lr.f,Or=i.QObject,Br=!Or||!Or.prototype||!Or.prototype.findChild,Ur=n&&r((function(){return 7!=Pt(wr({},"a",{get:function(){return wr(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=yr(Pr,e);n&&delete Pr[e],wr(t,e,r),n&&t!==Pr&&wr(Pr,e,n)}:wr,jr=function(t){var e=kr[t]=Pt(br.prototype);return e._k=t,e},Cr=Mr&&"symbol"==typeof br.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof br},Dr=function(t,e,r){return t===Pr&&Dr(Ir,e,r),u(t),e=h(e,!0),u(r),w(kr,e)?(r.enumerable?(w(t,xr)&&t[xr][e]&&(t[xr][e]=!1),r=Pt(r,{enumerable:v(0,!1)})):(w(t,xr)||wr(t,xr,v(1,{})),t[xr][e]=!0),Ur(t,e,r)):wr(t,e,r)},Lr=function(t,e){u(t);for(var r,n=function(t){var e=St(t),r=lr.f;if(r)for(var n,i=r(t),o=ue.f,a=0;i.length>a;)o.call(t,n=i[a++])&&e.push(n);return e}(e=q(e)),i=0,o=n.length;o>i;)Dr(t,r=n[i++],e[r]);return t},Tr=function(t){var e=Fr.call(this,t=h(t,!0));return!(this===Pr&&w(kr,t)&&!w(Ir,t))&&(!(e||!w(this,t)||!w(kr,t)||w(this,xr)&&this[xr][t])||e)},Hr=function(t,e){if(t=q(t),e=h(e,!0),t!==Pr||!w(kr,e)||w(Ir,e)){var r=yr(t,e);return!r||!w(kr,e)||w(t,xr)&&t[xr][e]||(r.enumerable=!0),r}},Rr=function(t){for(var e,r=mr(q(t)),n=[],i=0;r.length>i;)w(kr,e=r[i++])||e==xr||e==pr||n.push(e);return n},zr=function(t){for(var e,r=t===Pr,n=mr(r?Ir:q(t)),i=[],o=0;n.length>o;)!w(kr,e=n[o++])||r&&!w(Pr,e)||i.push(kr[e]);return i};Mr||(A((br=function(){if(this instanceof br)throw TypeError("Symbol is not a constructor!");var t=E(arguments.length>0?arguments[0]:void 0),e=function(r){this===Pr&&e.call(Ir,r),w(this,xr)&&w(this[xr],t)&&(this[xr][t]=!1),Ur(this,t,v(1,r))};return n&&Br&&Ur(Pr,t,{configurable:!0,set:e}),jr(t)}).prototype,"toString",(function(){return this._k})),fe.f=Hr,g.f=Dr,ut.f=vr.f=Rr,ue.f=Tr,lr.f=zr,n&&A(Pr,"propertyIsEnumerable",Tr,!0),sr.f=function(t){return jr(ct(t))}),P(P.G+P.W+P.F*!Mr,{Symbol:br});for(var Nr="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Vr=0;Nr.length>Vr;)ct(Nr[Vr++]);for(var Wr=St(ct.store),Gr=0;Wr.length>Gr;)cr(Wr[Gr++]);P(P.S+P.F*!Mr,"Symbol",{for:function(t){return w(_r,t+="")?_r[t]:_r[t]=br(t)},keyFor:function(t){if(!Cr(t))throw TypeError(t+" is not a symbol!");for(var e in _r)if(_r[e]===t)return e},useSetter:function(){Br=!0},useSimple:function(){Br=!1}}),P(P.S+P.F*!Mr,"Object",{create:function(t,e){return void 0===e?Pt(t):Lr(Pt(t),e)},defineProperty:Dr,defineProperties:Lr,getOwnPropertyDescriptor:Hr,getOwnPropertyNames:Rr,getOwnPropertySymbols:zr});var Yr=r((function(){lr.f(1)}));P(P.S+P.F*Yr,"Object",{getOwnPropertySymbols:function(t){return lr.f(st(t))}}),Er&&P(P.S+P.F*(!Mr||r((function(){var t=br();return"[null]"!=Sr([t])||"{}"!=Sr({a:t})||"{}"!=Sr(Object(t))}))),"JSON",{stringify:function(t){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=e=n[1],(a(e)||void 0!==t)&&!Cr(t))return Ct(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Cr(e))return e}),n[1]=e,Sr.apply(Er,n)}}),br.prototype[Ar]||p(br.prototype,Ar,br.prototype.valueOf),dt(br,"Symbol"),dt(Math,"Math",!0),dt(i.JSON,"JSON",!0);for(var $r=ct("iterator"),Kr=ct("toStringTag"),qr=wt.Array,Jr={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Xr=St(Jr),Qr=0;Qr<Xr.length;Qr++){var Zr,tn=Xr[Qr],en=Jr[tn],rn=i[tn],nn=rn&&rn.prototype;if(nn&&(nn[$r]||p(nn,$r,qr),nn[Kr]||p(nn,Kr,tn),wt[tn]=qr,en))for(Zr in Zt)nn[Zr]||A(nn,Zr,Zt[Zr],!0)}var on=de(!0);Qt(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=on(e,r),this._i+=t.length,{value:t,done:!1})}));var an="Map",un=(Ye(an,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=Ne.getEntry(Le(this,an),t);return e&&e.v},set:function(t,e){return Ne.def(Le(this,an),0===t?0:t,e)}},Ne,!0),"\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"),sn="["+un+"]",fn=RegExp("^"+sn+sn+"*"),cn=RegExp(sn+sn+"*$"),ln=function(t,e,n){var i={},o=r((function(){return!!un[t]()||"​"!="​"[t]()})),a=i[t]=o?e(hn):un[t];n&&(i[n]=a),P(P.P+P.F*o,"String",i)},hn=ln.trim=function(t,e){return t=String(K(t)),1&e&&(t=t.replace(fn,"")),2&e&&(t=t.replace(cn,"")),t},dn=ln,gn=ut.f,vn=fe.f,pn=g.f,yn=dn.trim,wn="Number",mn=i.Number,bn=mn,En=mn.prototype,Sn=Y(Pt(En))==wn,xn="trim"in String.prototype,An=function(t){var e=h(t,!1);if("string"==typeof e&&e.length>2){var r,n,i,o=(e=xn?e.trim():yn(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var a,u=e.slice(2),s=0,f=u.length;s<f;s++)if((a=u.charCodeAt(s))<48||a>i)return NaN;return parseInt(u,n)}}return+e};if(!mn(" 0o1")||!mn("0b1")||mn("+0x1")){mn=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof mn&&(Sn?r((function(){En.valueOf.call(n)})):Y(n)!=wn)?Ge(new bn(An(e)),n,mn):An(e)};for(var Fn,_n=n?gn(bn):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),kn=0;_n.length>kn;kn++)w(bn,Fn=_n[kn])&&!w(mn,Fn)&&pn(mn,Fn,vn(bn,Fn));mn.prototype=En,En.constructor=mn,A(i,wn,mn)}var In=Math.floor;P(P.S,"Number",{isInteger:function(t){return!a(t)&&isFinite(t)&&In(t)===t}}),n&&"g"!=/./g.flags&&g.f(RegExp.prototype,"flags",{configurable:!0,get:we});var Pn="toString",Mn=/./.toString,On=function(t){A(RegExp.prototype,Pn,t,!0)};r((function(){return"/a/b"!=Mn.call({source:"a",flags:"b"})}))?On((function(){var t=u(this);return"/".concat(t.source,"/","flags"in t?t.flags:!n&&t instanceof RegExp?we.call(t):void 0)})):Mn.name!=Pn&&On((function(){return Mn.call(this)}));var Bn={};Bn[ct("toStringTag")]="z",Bn+""!="[object z]"&&A(Object.prototype,"toString",(function(){return"[object "+yt(this)+"]"}),!0);var Un=function(t){var e=String(K(this)),r="",n=z(t);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r},jn=function(t,e,r,n){var i=String(K(t)),o=i.length,a=void 0===r?" ":String(r),u=V(e);if(u<=o||""==a)return i;var s=u-o,f=Un.call(a,Math.ceil(s/a.length));return f.length>s&&(f=f.slice(0,s)),n?f+i:i+f},Cn=i.navigator,Dn=Cn&&Cn.userAgent||"",Ln=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(Dn);P(P.P+P.F*Ln,"String",{padStart:function(t){return jn(this,t,arguments.length>1?arguments[1]:void 0,!0)}});var Tn=/:([0-9A-Fa-f]{8,})([0-9A-Fa-f]{2})(?:\r\n|\r|\n|)/g;function Hn(t){return 255&-t.reduce((function(t,e){return t+e}),0)}function Rn(t,e){return 255&-(t.reduce((function(t,e){return t+e}),0)+e.reduce((function(t,e){return t+e}),0))}function zn(t){return t.toString(16).toUpperCase().padStart(2,"0")}Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};var Nn=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._blocks=new Map,e&&"function"==typeof e[Symbol.iterator]){var r,n=Qe(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(!(i instanceof Array)||2!==i.length)throw new Error("First parameter to MemoryMap constructor must be an iterable of [addr, bytes] or undefined");this.set(i[0],i[1])}}catch(s){n.e(s)}finally{n.f()}}else if("object"===$e(e))for(var o=0,a=Object.keys(e);o<a.length;o++){var u=a[o];this.set(parseInt(u),e[u])}else if(null!=e)throw new Error("First parameter to MemoryMap constructor must be an iterable of [addr, bytes] or undefined")}var e,r,n;return e=t,r=[{key:"set",value:function(t,e){if(!Number.isInteger(t))throw new Error("Address passed to MemoryMap is not an integer");if(t<0)throw new Error("Address passed to MemoryMap is negative");if(!(e instanceof Uint8Array))throw new Error("Bytes passed to MemoryMap are not an Uint8Array");return this._blocks.set(t,e)}},{key:"get",value:function(t){return this._blocks.get(t)}},{key:"clear",value:function(){return this._blocks.clear()}},{key:"delete",value:function(t){return this._blocks.delete(t)}},{key:"entries",value:function(){return this._blocks.entries()}},{key:"forEach",value:function(t,e){return this._blocks.forEach(t,e)}},{key:"has",value:function(t){return this._blocks.has(t)}},{key:"keys",value:function(){return this._blocks.keys()}},{key:"values",value:function(){return this._blocks.values()}},{key:Symbol.iterator,value:function(){return this._blocks[Symbol.iterator]()}},{key:"join",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,r=Array.from(this.keys()).sort((function(t,e){return t-e})),n=new Map,i=-1,o=-1,a=0,u=r.length;a<u;a++){var s=r[a],f=this.get(r[a]).length;if(o===s&&o-i<e)n.set(i,n.get(i)+f),o+=f;else{if(!(o<=s))throw new Error("Overlapping data around address 0x"+s.toString(16));n.set(s,f),i=s,o=s+f}}for(var c,l=new t,h=-1,d=0,g=r.length;d<g;d++){var v=r[d];n.has(v)&&(c=new Uint8Array(n.get(v)),l.set(v,c),h=v),c.set(this.get(v),v-h)}return l}},{key:"paginate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;if(e<=0)throw new Error("Page size must be greater than zero");for(var n,i=new t,o=Array.from(this.keys()).sort((function(t,e){return t-e})),a=0,u=o.length;a<u;a++)for(var s=o[a],f=this.get(s),c=f.length,l=s+c,h=s-s%e;h<l;h+=e){(n=i.get(h))||((n=new Uint8Array(e)).fill(r),i.set(h,n));var d=h-s,g=void 0;d<=0?(g=f.subarray(0,Math.min(e+d,c)),n.set(g,-d)):(g=f.subarray(d,d+Math.min(e,c-d)),n.set(g,0))}return i}},{key:"getUint32",value:function(t,e){for(var r=Array.from(this.keys()),n=0,i=r.length;n<i;n++){var o=r[n],a=this.get(o),u=a.length;if(o<=t&&t+4<=o+u)return new DataView(a.buffer,t-o,4).getUint32(0,e)}}},{key:"asHexString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=0,r=-65536,n=[];if(t<=0)throw new Error("Size of record must be greater than zero");if(t>255)throw new Error("Size of record must be less than 256");for(var i=new Uint8Array(6),o=new Uint8Array(4),a=Array.from(this.keys()).sort((function(t,e){return t-e})),u=0,s=a.length;u<s;u++){var f=a[u],c=this.get(f);if(!(c instanceof Uint8Array))throw new Error("Block at offset "+f+" is not an Uint8Array");if(f<0)throw new Error("Block at offset "+f+" has a negative thus invalid address");var l=c.length;if(l){if(f>r+65535&&(r=f-f%65536,e=0,i[0]=2,i[1]=0,i[2]=0,i[3]=4,i[4]=r>>24,i[5]=r>>16,n.push(":"+Array.prototype.map.call(i,zn).join("")+zn(Hn(i)))),f<r+e)throw new Error("Block starting at 0x"+f.toString(16)+" overlaps with a previous block.");e=f%65536;var h=0,d=f+l;if(d>4294967295)throw new Error("Data cannot be over 0xFFFFFFFF");for(;r+e<d;){e>65535&&(r+=65536,e=0,i[0]=2,i[1]=0,i[2]=0,i[3]=4,i[4]=r>>24,i[5]=r>>16,n.push(":"+Array.prototype.map.call(i,zn).join("")+zn(Hn(i))));for(var g=-1;e<65536&&g;)if(g=Math.min(t,d-r-e,65536-e)){o[0]=g,o[1]=e>>8,o[2]=e,o[3]=0;var v=c.subarray(h,h+g);n.push(":"+Array.prototype.map.call(o,zn).join("")+Array.prototype.map.call(v,zn).join("")+zn(Rn(o,v))),h+=g,e+=g}}}}return n.push(":00000001FF"),n.join("\n")}},{key:"clone",value:function(){var e,r=new t,n=Qe(this);try{for(n.s();!(e=n.n()).done;){var i=qe(e.value,2),o=i[0],a=i[1];r.set(o,new Uint8Array(a))}}catch(u){n.e(u)}finally{n.f()}return r}},{key:"slice",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(r<0)throw new Error("Length of the slice cannot be negative");var n,i=new t,o=Qe(this);try{for(o.s();!(n=o.n()).done;){var a=qe(n.value,2),u=a[0],s=a[1],f=s.length;if(u+f>=e&&u<e+r){var c=Math.max(e,u),l=Math.min(e+r,u+f),h=l-c,d=c-u;h>0&&i.set(c,s.subarray(d,d+h))}}}catch(g){o.e(g)}finally{o.f()}return i}},{key:"slicePad",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255;if(e<0)throw new Error("Length of the slice cannot be negative");var n,i=new Uint8Array(e).fill(r),o=Qe(this);try{for(o.s();!(n=o.n()).done;){var a=qe(n.value,2),u=a[0],s=a[1],f=s.length;if(u+f>=t&&u<t+e){var c=Math.max(t,u),l=Math.min(t+e,u+f),h=l-c,d=c-u;h>0&&i.set(s.subarray(d,d+h),c-t)}}}catch(g){o.e(g)}finally{o.f()}return i}},{key:"contains",value:function(t){var e,r=Qe(t);try{for(r.s();!(e=r.n()).done;){var n=qe(e.value,2),i=n[0],o=n[1],a=o.length,u=this.slice(i,a).join().get(i);if(!u||u.length!==a)return!1;for(var s in o)if(o[s]!==u[s])return!1}}catch(f){r.e(f)}finally{r.f()}return!0}},{key:"size",get:function(){return this._blocks.size}}],n=[{key:"fromHex",value:function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,i=new t,o=0,a=0,u=0;for(Tn.lastIndex=0;null!==(r=Tn.exec(e));){if(a++,o!==r.index)throw new Error("Malformed hex file: Could not parse between characters "+o+" and "+r.index+' ("'+e.substring(o,Math.min(r.index,o+16)).trim()+'")');o=Tn.lastIndex;var s=r,f=qe(s,3),c=f[1],l=f[2],h=new Uint8Array(c.match(/[\da-f]{2}/gi).map((function(t){return parseInt(t,16)}))),d=h[0];if(d+4!==h.length)throw new Error("Mismatched record length at record "+a+" ("+r[0].trim()+"), expected "+d+" data bytes but actual length is "+(h.length-4));var g=Hn(h);if(parseInt(l,16)!==g)throw new Error("Checksum failed at record "+a+" ("+r[0].trim()+"), should be "+g.toString(16));var v=(h[1]<<8)+h[2],p=h[3],y=h.subarray(4);if(0===p){if(i.has(u+v))throw new Error("Duplicated data at record "+a+" ("+r[0].trim()+")");if(v+y.length>65536)throw new Error("Data at record "+a+" ("+r[0].trim()+") wraps over 0xFFFF. This would trigger ambiguous behaviour. Please restructure your data so that for every record the data offset plus the data length do not exceed 0xFFFF.");i.set(u+v,y)}else{if(0!==v)throw new Error("Record "+a+" ("+r[0].trim()+") must have 0000 as data offset.");switch(p){case 1:if(o!==e.length)throw new Error("There is data after an EOF record at record "+a);return i.join(n);case 2:u=(y[0]<<8)+y[1]<<4;break;case 3:break;case 4:u=(y[0]<<8)+y[1]<<16;break;case 5:break;default:throw new Error("Invalid record type 0x"+zn(p)+" at record "+a+" (should be between 0x00 and 0x05)")}}}throw a?new Error("No EOF record at end of file"):new Error("Malformed .hex file, could not parse any registers")}},{key:"overlapMemoryMaps",value:function(t){var e,r=new Set,n=Qe(t);try{for(n.s();!(e=n.n()).done;){var i,o=Qe(qe(e.value,2)[1]);try{for(o.s();!(i=o.n()).done;){var a=qe(i.value,2),u=a[0],s=a[1];r.add(u),r.add(u+s.length)}}catch(g){o.e(g)}finally{o.f()}}}catch(g){n.e(g)}finally{n.f()}for(var f=Array.from(r.values()).sort((function(t,e){return t-e})),c=new Map,l=function(e,r){var n,i=f[e],o=f[e+1],a=[],u=Qe(t);try{for(u.s();!(n=u.n()).done;){var s=qe(n.value,2),l=s[0],h=s[1],d=Array.from(h.keys()).reduce((function(t,e){return e>i?t:Math.max(t,e)}),-1);if(-1!==d){var v=h.get(d),p=i-d,y=o-d;p<v.length&&a.push([l,v.subarray(p,y)])}}}catch(g){u.e(g)}finally{u.f()}a.length&&c.set(i,a)},h=0,d=f.length-1;h<d;h++)l(h);return c}},{key:"flattenOverlaps",value:function(e){return new t(Array.from(e.entries()).map((function(t){var e=qe(t,2),r=e[0],n=e[1];return[r,n[n.length-1][1]]})))}},{key:"fromPaddedUint8Array",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64;if(!(e instanceof Uint8Array))throw new Error("Bytes passed to fromPaddedUint8Array are not an Uint8Array");for(var i=new t,o=0,a=-1,u=0,s=!1,f=e.length,c=0;c<f;c++){var l=e[c];l===r?++o>=n&&(-1!==a&&i.set(u,e.subarray(u,a+1)),s=!0):(s&&(s=!1,u=c),a=c,o=0)}return s||-1===a||i.set(u,e.subarray(u,f)),i}}],r&&Ke(e.prototype,r),n&&Ke(e,n),t}(),Vn=e((function(t){function e(){}function r(){}!function(){function t(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;a++){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&((e-=3)>-1&&o.push(239,191,189),i=null);if(r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<2097152))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function n(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}e.prototype.encode=function(e){return"undefined"==typeof Uint8Array?t(e):new Uint8Array(t(e))},r.prototype.decode=function(t){return function(t,e,r){var i="",o="";r=Math.min(t.length,r||1/0);for(var a=e=e||0;a<r;a++)t[a]<=127?(i+=n(o)+String.fromCharCode(t[a]),o=""):o+="%"+t[a].toString(16);return i+n(o)}(t,0,t.length)}}(),t&&(t.exports.TextDecoderLite=r,t.exports.TextEncoderLite=e)})),Wn=Vn.TextDecoderLite,Gn=Vn.TextEncoderLite;function Yn(t){return(new Gn).encode(t)}function $n(t){return(new Wn).decode(t)}var Kn,qn=function(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r},Jn=function(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0};(Kn=t.AppendedBlock||(t.AppendedBlock={}))[Kn.StartAdd=253952]="StartAdd",Kn[Kn.Length=8192]="Length",Kn[Kn.EndAdd=262144]="EndAdd";function Xn(t){return t.replace(":::::::::::::::::::::::::::::::::::::::::::\n","")}function Qn(e){var r;if("string"==typeof e){var n=Xn(e);r=Nn.fromHex(n)}else r=e;var i=r.slicePad(t.AppendedBlock.StartAdd,2,255);return 77===i[0]&&80===i[1]}var Zn=ue.f,ti=function(t){return function(e){for(var r,i=q(e),o=St(i),a=o.length,u=0,s=[];a>u;)r=o[u++],n&&!Zn.call(i,r)||s.push(t?[r,i[r]]:i[r]);return s}},ei=ti(!0);P(P.S,"Object",{entries:function(t){return ei(t)}});var ri=ti(!1);P(P.S,"Object",{values:function(t){return ri(t)}});var ni=ct("match"),ii=function(t){var e;return a(t)&&(void 0!==(e=t[ni])?!!e:"RegExp"==Y(t))},oi=function(t,e,r){if(ii(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(K(t))},ai=ct("match"),ui=function(t){var e=/./;try{"/./"[t](e)}catch(Ao){try{return e[ai]=!1,!"/./"[t](e)}catch(r){}}return!0},si="includes";P(P.P+P.F*ui(si),"String",{includes:function(t){return!!~oi(this,t,si).indexOf(t,arguments.length>1?arguments[1]:void 0)}});var fi="endsWith",ci="".endsWith;P(P.P+P.F*ui(fi),"String",{endsWith:function(t){var e=oi(this,t,fi),r=arguments.length>1?arguments[1]:void 0,n=V(e.length),i=void 0===r?n:Math.min(V(r),n),o=String(t);return ci?ci.call(e,o,i):e.slice(i-o.length,i)===o}});var li=Z(!0);P(P.P,"Array",{includes:function(t){return li(this,t,arguments.length>1?arguments[1]:void 0)}}),Vt("includes");var hi,di=Math.min,gi=[].push,vi=4294967295,pi=!r((function(){RegExp(vi,"y")}));function yi(t){if(t.length%2!=0)throw new Error('Hex string "'+t+'" is not divisible by 2.');var e=t.match(/.{1,2}/g);return e?new Uint8Array(e.map((function(e){var r=parseInt(e,16);if(Number.isNaN(r))throw new Error('There were some non-hex characters in "'+t+'".');return r}))):new Uint8Array}function wi(t){return t.toString(16).toUpperCase().padStart(2,"0")}function mi(t){return t.reduce((function(t,e){return t+e.toString(16).toUpperCase().padStart(2,"0")}),"")}Ie("split",2,(function(t,e,r,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!ii(t))return r.call(n,t,e);for(var i,o,a,u=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,c=void 0===e?vi:e>>>0,l=new RegExp(t.source,s+"g");(i=Ae.call(l,n))&&!((o=l.lastIndex)>f&&(u.push(n.slice(f,i.index)),i.length>1&&i.index<n.length&&gi.apply(u,i.slice(1)),a=i[0].length,f=o,u.length>=c));)l.lastIndex===i.index&&l.lastIndex++;return f===n.length?!a&&l.test("")||u.push(""):u.push(n.slice(f)),u.length>c?u.slice(0,c):u}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)}:r,[function(r,n){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,n):i.call(String(o),r,n)},function(t,e){var o=n(i,t,this,e,i!==r);if(o.done)return o.value;var a=u(t),s=String(this),f=Rt(a,RegExp),c=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(pi?"y":"g"),h=new f(pi?a:"^(?:"+a.source+")",l),d=void 0===e?vi:e>>>0;if(0===d)return[];if(0===s.length)return null===ye(h,s)?[s]:[];for(var g=0,v=0,p=[];v<s.length;){h.lastIndex=pi?v:0;var y,w=ye(h,pi?s:s.slice(v));if(null===w||(y=di(V(h.lastIndex+(pi?0:v)),s.length))===g)v=ve(s,v,c);else{if(p.push(s.slice(g,v)),p.length===d)return p;for(var m=1;m<=w.length-1;m++)if(p.push(w[m]),p.length===d)return p;v=g=y}}return p.push(s.slice(g)),p}]})),P(P.S,"Number",{isNaN:function(t){return t!=t}}),function(t){t[t.Data=0]="Data",t[t.EndOfFile=1]="EndOfFile",t[t.ExtendedSegmentAddress=2]="ExtendedSegmentAddress",t[t.StartSegmentAddress=3]="StartSegmentAddress",t[t.ExtendedLinearAddress=4]="ExtendedLinearAddress",t[t.StartLinearAddress=5]="StartLinearAddress",t[t.BlockStart=10]="BlockStart",t[t.BlockEnd=11]="BlockEnd",t[t.PaddedData=12]="PaddedData",t[t.CustomData=13]="CustomData",t[t.OtherData=14]="OtherData"}(hi||(hi={}));var bi=":".length,Ei=0+bi+2+4+2,Si=bi+2+4+2+0+2,xi=Si-0+64;function Ai(t){return t>=hi.Data&&t<=hi.StartLinearAddress||t>=hi.BlockStart&&t<=hi.OtherData}function Fi(t){return 255&-t.reduce((function(t,e){return t+e}),0)}function _i(t,e,r){if(t<0||t>65535)throw new Error("Record ("+e+") address out of range: "+t);var n=r.length;if(n>32)throw new Error("Record ("+e+") data has too many bytes ("+n+").");if(!Ai(e))throw new Error("Record type '"+e+"' is not valid.");var i,o,a,u=(i=[new Uint8Array([n,t>>8,255&t,e]),r],o=i.reduce((function(t,e){return t+e.length}),0),a=new Uint8Array(o),i.reduce((function(t,e){return a.set(e,t),t+e.length}),0),a);return":"+mi(u)+wi(Fi(u))}function ki(t){if(t.length<Si)throw new Error("Record length too small: "+t);if(t.length>xi)throw new Error("Record length is too large: "+t);if(":"!==t[0])throw new Error('Record does not start with a ":": '+t);return!0}function Ii(t){ki(t);var e=bi+2+4,r=t.slice(e,e+2),n=parseInt(r,16);if(!Ai(n))throw new Error("Record type '"+r+"' from record '"+t+"' is not valid.");return n}function Pi(t){try{return yi(t.slice(Ei,-2))}catch(Ao){throw new Error('Could not parse Intel Hex record "'+t+'": '+Ao.message)}}function Mi(t){if(t<0||t>4294967295)throw new Error("Address '"+t+"' for Extended Linear Address record is out of range.");return _i(0,hi.ExtendedLinearAddress,new Uint8Array([t>>24&255,t>>16&255]))}function Oi(t){if(t<0||t>65535)throw new Error("Board ID out of range when creating Block Start record.");return _i(0,hi.BlockStart,new Uint8Array([t>>8&255,255&t,192,222]))}function Bi(t){switch(t){case 4:return":0400000BFFFFFFFFF5";case 12:return":0C00000BFFFFFFFFFFFFFFFFFFFFFFFFF5";default:var e=new Uint8Array(t).fill(255);return _i(0,hi.BlockEnd,e)}}function Ui(t){var e=new Uint8Array(t).fill(255);return _i(0,hi.PaddedData,e)}function ji(t,e){var r=function(t){var e;ki(t);try{e=yi(t.substring(1))}catch(Ao){throw new Error('Could not parse Intel Hex record "'+t+'": '+Ao.message)}var r=e[0],n=(e[1]<<8)+e[2],i=e[3],o=4+r,a=e.slice(4,o),u=e[o],s=o+1;if(e.length>s)throw new Error('Parsed record "'+t+'" is larger than indicated by the byte count.\n\tExpected: '+s+"; Length: "+e.length+".");return{byteCount:r,address:n,recordType:i,data:a,checksum:u}}(t),n=new Uint8Array(r.data.length+4);return n[0]=r.data.length,n[1]=r.address>>8,n[2]=255&r.address,n[3]=e,n.set(r.data,4),":"+mi(n)+wi(Fi(n))}function Ci(t){var e=Pi(t);if(2!==e.length||15&e[0]||0!==e[1])throw new Error("Invalid Extended Segment Address record "+t);return Mi(e[0]<<12)}function Di(t){return t.replace(/\r/g,"").split("\n").filter(Boolean)}function Li(t){for(var e=16,r=0,n=0,i=t;n<i.length;n++){var o=(i[n].length-Si)/2;if(o>e?(e=o,r=0):o===e&&r++,r>12)break}if(e>32)throw new Error("Intel Hex record data size is too large: "+e);return e}var Ti,Hi,Ri,zi=[39168,39169],Ni=512;function Vi(t,e){var r=!zi.includes(e),n=Oi(e),i=Mi(0),o=i.length,a=n.length,u=Bi(0).length,s=Ui(0).length,f=Di(t),c=Li(f);if(!f.length)return"";if(Yi(f))throw new Error("Board ID "+e+" Hex is already a Universal Hex.");for(var l=0,h=[];l<f.length;){var d=0,g=Ii(f[l]);g===hi.ExtendedLinearAddress?(i=f[l],l++):g===hi.ExtendedSegmentAddress&&(i=Ci(f[l]),l++),h.push(i),d+=o+1,h.push(n),d+=a+1,d+=u+1;for(var v=!1;f[l]&&Ni>=d+f[l].length+1;){var p=Ii(y=f[l++]);if(r&&p===hi.Data)y=ji(y,hi.CustomData);else if(p===hi.ExtendedLinearAddress)i=y;else if(p===hi.ExtendedSegmentAddress)i=y=Ci(y);else if(p===hi.EndOfFile){v=!0;break}h.push(y),d+=y.length+1}if(v){if(l!==f.length)throw $i(f)?new Error("Board ID "+e+" Hex is from MakeCode, import this hex into the MakeCode editor to create a Universal Hex."):new Error("EoF record found at record "+l+" of "+f.length+" in Board ID "+e+" hex");h.push(Bi(0)),h.push(":00000001FF")}else{for(;Ni-d>2*c;){var y=Ui(Math.min((Ni-d-(s+1))/2,c));h.push(y),d+=y.length+1}h.push(Bi((Ni-d)/2))}}return h.push(""),h.join("\n")}function Wi(t,e){var r=[],n=0,i=0,o=function(t){n+=t.length+1},a=function(t){r.push(t),o(t)},u=Di(t);if(!u.length)return"";if(Yi(u))throw new Error("Board ID "+e+" Hex is already a Universal Hex.");var s=Ii(u[0]);s===hi.ExtendedLinearAddress?(a(u[0]),i++):s===hi.ExtendedSegmentAddress?(a(Ci(u[0])),i++):a(Mi(0)),a(Oi(e));for(var f=!zi.includes(e),c=!1;i<u.length;){var l=Ii(p=u[i++]);if(l===hi.Data)a(f?ji(p,hi.CustomData):p);else if(l===hi.ExtendedSegmentAddress)a(Ci(p));else if(l===hi.ExtendedLinearAddress)a(p);else if(l===hi.EndOfFile){c=!0;break}}if(i!==u.length)throw $i(u)?new Error("Board ID "+e+" Hex is from MakeCode, import this hex into the MakeCode editor to create a Universal Hex."):new Error("EoF record found at record "+i+" of "+u.length+" in Board ID "+e+" hex ");o(Bi(0));for(var h=Ui(0).length+1,d=Li(u),g=2*d,v=(Ni-n%Ni)%Ni;v>g;){var p,y=v-h>>1;a(p=Ui(Math.min(y,d))),v=(Ni-n%Ni)%Ni}return r.push(Bi(v>>1)),c&&r.push(":00000001FF"),r.push(""),r.join("\n")}function Gi(t){var e=":02000004";if(t.slice(0,e.length)!==e)return!1;for(var r=e.length;":"!==t[++r]&&r<xi+3;);var n=":0400000A";return t.slice(r,r+n.length)===n}function Yi(t){return Ii(t[0])===hi.ExtendedLinearAddress&&Ii(t[1])===hi.BlockStart&&Ii(t[t.length-1])===hi.EndOfFile}function $i(t){var e=t.indexOf(":00000001FF");if(e===t.length-1)for(;--e>0;)if(t[e]===Mi(536870912))return!0;for(;++e<t.length;){if(Ii(t[e])===hi.OtherData)return!0;if(t[e]===Mi(536870912))return!0}return!1}function Ki(t,e){var r=t.slicePad(e,4,255);return new DataView(r.buffer).getUint32(0,!0)}function qi(t,e){var r=t.slicePad(e,2,255);return new DataView(r.buffer).getUint16(0,!0)}function Ji(t,e){return t.slicePad(e,1,255)[0]}function Xi(t,e){for(var r=t.slice(e).get(e),n=0;n<r.length&&0!==r[n];)n++;return n===r.length?"":$n(r.slice(0,n))}!function(t){t[t.V1=39168]="V1",t[t.V2=39171]="V2"}(Ti||(Ti={})),ce("Uint32",4,(function(t){return function(e,r,n){return t(this,e,r,n)}})),function(t){t[t.softDevice=1]="softDevice",t[t.microPython=2]="microPython",t[t.fs=3]="fs"}(Hi||(Hi={})),function(t){t[t.empty=0]="empty",t[t.data=1]="data",t[t.pointer=2]="pointer"}(Ri||(Ri={}));var Qi;!function(t){t[t.magic2=4]="magic2",t[t.pageSizeLog2=t.magic2+2]="pageSizeLog2",t[t.regionCount=t.pageSizeLog2+2]="regionCount",t[t.tableLength=t.regionCount+2]="tableLength",t[t.version=t.tableLength+2]="version",t[t.magic1=t.version+4]="magic1"}(Qi||(Qi={}));var Zi;!function(t){t[t.hashData=8]="hashData",t[t.lengthBytes=t.hashData+4]="lengthBytes",t[t.startPage=t.lengthBytes+2]="startPage",t[t.hashType=t.startPage+1]="hashType",t[t.id=t.hashType+1]="id"}(Zi||(Zi={}));var to=Zi.id;function eo(t,e){var r,n,i,o=Ji(t,e-Zi.id),a=Ji(t,e-Zi.hashType),u=(r=t,n=e-Zi.hashData,i=r.slicePad(n,8,255),new DataView(i.buffer).getUint32(0,!0)),s="";return a===Ri.pointer&&(s=Xi(t,4294967295&u)),{id:o,startPage:qi(t,e-Zi.startPage),lengthBytes:Ki(t,e-Zi.lengthBytes),hashType:a,hashData:u,hashPointerData:s}}function ro(t){for(var e=function(t,e){void 0===e&&(e=1024);for(var r=0,n=new Uint8Array(new Uint32Array([1501507838]).buffer),i=new Uint8Array(new Uint32Array([3249657757]).buffer),o=t.paginate(e,255).entries(),a=o.next();!a.done;a=o.next())if(a.value){var u=a.value[1],s=u.subarray(-Qi.magic2);if(Jn(s,i)&&Jn(u.subarray(-Qi.magic1,-(Qi.magic1-4)),n)){r=a.value[0]+e;break}}var f=qi(t,r-Qi.version),c=qi(t,r-Qi.tableLength),l=qi(t,r-Qi.regionCount),h=qi(t,r-Qi.pageSizeLog2);return{pageSizeLog2:h,pageSize:Math.pow(2,h),regionCount:l,tableLength:c,version:f,endAddress:r,startAddress:r-Qi.magic1}}(t,4096),r={},n=0;n<e.regionCount;n++){var i=eo(t,e.startAddress-n*to);r[i.id]=i}if(!r.hasOwnProperty(Hi.microPython))throw new Error("Could not find a MicroPython region in the regions table.");if(!r.hasOwnProperty(Hi.fs))throw new Error("Could not find a File System region in the regions table.");var o=(r[Hi.microPython].startPage,e.pageSize,r[Hi.microPython].lengthBytes);o=e.endAddress;var a=r[Hi.microPython].hashPointerData,u=r[Hi.fs].startPage*e.pageSize,s=u+r[Hi.fs].lengthBytes;return{flashPageSize:e.pageSize,flashSize:524288,flashStartAddress:0,flashEndAddress:524288,runtimeStartAddress:0,runtimeEndAddress:o,fsStartAddress:u,fsEndAddress:s,uPyVersion:a,deviceVersion:"V2"}}var no,io=[{deviceVersion:"V1",magicHeader:401518716,flashSize:262144,fsEnd:262144},{deviceVersion:"V2",magicHeader:1206825084,flashSize:524288,fsEnd:471040}],oo=268439744;function ao(t){return Ki(t,no.MagicValue)}function uo(t){var e=t.slice(oo);if(!function(t){for(var e=ao(t),r=0,n=io;r<n.length;r++)if(n[r].magicHeader===e)return!0;return!1}(e))throw new Error("Could not find valid MicroPython UICR data.");var r=function(t){var e=Ki(t,no.PageSize);return Math.pow(2,e)}(e),n=function(t){for(var e=ao(t),r=0,n=io;r<n.length;r++){var i=n[r];if(i.magicHeader===e)return i.flashSize}throw new Error("Cannot find flash size, unknown UICR Magic value")}(e),i=function(t){return qi(t,no.StartPage)}(e)*r,o=i+n,a=function(t){return qi(t,no.PagesUsed)}(e)*r,u=Xi(t,function(t){return Ki(t,no.VersionLocation)}(e)),s=function(t){for(var e=ao(t),r=0,n=io;r<n.length;r++){var i=n[r];if(i.magicHeader===e)return i.deviceVersion}throw new Error("Cannot find device version, unknown UICR Magic value")}(e);return{flashPageSize:r,flashSize:n,flashStartAddress:i,flashEndAddress:o,runtimeStartAddress:i,runtimeEndAddress:a,fsStartAddress:a,fsEndAddress:function(t){for(var e=ao(t),r=0,n=io;r<n.length;r++){var i=n[r];if(i.magicHeader===e)return i.fsEnd}throw new Error("Cannot find fs end address, unknown UICR Magic value")}(e),uicrStartAddress:no.MagicValue,uicrEndAddress:no.End,uPyVersion:u,deviceVersion:s}}function so(t){var e="";try{return uo(t)}catch(r){e+=r.message+"\n"}try{return ro(t)}catch(r){throw new Error(e+r.message)}}!function(t){t[t.MagicValue=oo]="MagicValue",t[t.EndMarker=t.MagicValue+4]="EndMarker",t[t.PageSize=t.EndMarker+4]="PageSize",t[t.StartPage=t.PageSize+4]="StartPage",t[t.PagesUsed=t.StartPage+2]="PagesUsed",t[t.Delimiter=t.PagesUsed+2]="Delimiter",t[t.VersionLocation=t.Delimiter+4]="VersionLocation",t[t.RegionsTerminator=t.VersionLocation+4]="RegionsTerminator",t[t.End=t.RegionsTerminator+4]="End"}(no||(no={}));var fo=128,co=126;function lo(t){var e=so(t),r=ho(t)-32256,n=Math.max(e.fsStartAddress,r);if(n%e.flashPageSize)throw new Error("File system start address from UICR does not align with flash page size.");return n}function ho(e){var r=so(e),n=r.fsEndAddress;return"V1"===r.deviceVersion&&(Qn(e)&&(n=t.AppendedBlock.StartAdd),n-=r.flashPageSize),n}function go(t){var e=so(t);return ho(t)-e.flashPageSize}var vo=function(){function t(t,e){if(this._filename=t,this._filenameBytes=Yn(t),this._filenameBytes.length>120)throw new Error('File name "'+t+'" is too long (max 120 characters).');this._dataBytes=e;var r=this._generateFileHeaderBytes();this._fsDataBytes=new Uint8Array(r.length+this._dataBytes.length+1),this._fsDataBytes.set(r,0),this._fsDataBytes.set(this._dataBytes,r.length),this._fsDataBytes[this._fsDataBytes.length-1]=255}return t.prototype.getFsChunks=function(t){var e=[],r=0,n=0,i=new Uint8Array(fo).fill(255);i[0]=254;for(var o=Math.min(this._fsDataBytes.length,co),a=0;a<o;a++,n++)i[1+a]=this._fsDataBytes[n];for(e.push(i);n<this._fsDataBytes.length;){if(++r>=t.length)throw new Error("Not enough space for the "+this._filename+" file.");e[e.length-1][127]=t[r],(i=new Uint8Array(fo).fill(255))[0]=t[r-1],o=Math.min(this._fsDataBytes.length-n,co);for(a=0;a<o;a++,n++)i[1+a]=this._fsDataBytes[n];e.push(i)}return e},t.prototype.getFsBytes=function(t){for(var e=this.getFsChunks(t),r=e.length*fo,n=new Uint8Array(r),i=0;i<e.length;i++)n.set(e[i],fo*i);return n},t.prototype.getFsFileSize=function(){return Math.ceil(this._fsDataBytes.length/co)*fo},t.prototype._generateFileHeaderBytes=function(){var t=2+this._filenameBytes.length,e=(t+this._dataBytes.length)%co,r=t-this._filenameBytes.length,n=new Uint8Array(t);n[0]=e,n[1]=this._filenameBytes.length;for(var i=r;i<t;++i)n[i]=this._filenameBytes[i-r];return n},t}();function po(t,e,r){if(!e)throw new Error("File has to have a file name.");if(!r.length)throw new Error("File "+e+" has to contain data.");var n=function(t){for(var e=[],r=lo(t),n=go(t),i=r,o=1;i<n;){var a=t.slicePad(i,1,255)[0];255!==a&&0!==a||e.push(o),o++,i+=fo}return e}(t);if(0===n.length)throw new Error("There is no storage space left.");var i=function(t,e){return lo(t)+(e-1)*fo}(t,n[0]),o=new vo(e,r).getFsBytes(n);t.set(i,o),function(t){t.set(go(t),new Uint8Array([253]))}(t)}function yo(t,e,r){var n;void 0===r&&(r=!1);var i=so(n="string"==typeof t?Nn.fromHex(t):t.clone());return Object.keys(e).forEach((function(t){po(n,t,e[t])})),r?n.slicePad(0,i.flashSize):n.asHexString()+"\n"}function wo(t,e){var r=t.originalMemMap.clone();return Object.keys(e).forEach((function(t){po(r,t,e[t])})),t.uPyIntelHex+r.slice(t.uPyEndAddress).asHexString()+"\n"}function mo(t){for(var e,r=lo(e="string"==typeof t?Nn.fromHex(t):t.clone()),n=go(e),i={},o=[],a=r,u=1;a<n;){var s=e.slicePad(a,fo,255),f=s[0];255!==f&&0!==f&&253!==f&&(i[u]=s,254===f&&o.push(u)),u++,a+=fo}for(var c={},l=0,h=o;l<h.length;l++){var d=h[l],g=i[d],v=g[1],p=3+g[2],y=$n(g.slice(3,p));if(c.hasOwnProperty(y))throw new Error("Found multiple files named: "+y+".");c[y]=new Uint8Array(0);for(var w=g,m=d,b=Object.keys(i).length+1;b--;){var E=w[127];if(255===E){c[y]=qn(c[y],w.slice(p,1+v));break}c[y]=qn(c[y],w.slice(p,127));var S=i[E];if(!S)throw new Error("Chunk "+m+" points to unused index "+E+".");if(S[0]!==m)throw new Error("Chunk index "+E+" did not link to previous chunk index "+m+".");w=S,m=E,p=1}if(b<=0)throw new Error("Malformed file chunks did not link correctly.")}return c}function bo(t){var e=so(t),r=lo(t);return ho(t)-r-e.flashPageSize}var Eo=function(){function t(t,e){if(!t)throw new Error("File was not provided a valid filename.");if(!e)throw new Error("File "+t+" does not have valid content.");if(this.filename=t,"string"==typeof e)this._dataBytes=Yn(e);else{if(!(e instanceof Uint8Array))throw new Error("File data type must be a string or Uint8Array.");this._dataBytes=e}}return t.prototype.getText=function(){return $n(this._dataBytes)},t.prototype.getBytes=function(){return this._dataBytes},t}(),So=Ti,xo=function(){function t(t,e){var r=this,n=(void 0===e?{}:e).maxFsSize,i=void 0===n?0:n;this._uPyFsBuilderCache=[],this._files={},this._storageSize=0;var o=Array.isArray(t)?t:[{hex:t,boardId:0}],a=1/0;o.forEach((function(t){if(!t.hex)throw new Error("Invalid MicroPython hex.");var e,n,i,o,u=(e=t.hex,n=Nn.fromHex(e),i=so(n),o=n.slice(i.runtimeStartAddress,i.runtimeEndAddress-i.runtimeStartAddress).asHexString().replace(":00000001FF",""),{originalIntelHex:e,originalMemMap:n,uPyIntelHex:o,uPyEndAddress:i.runtimeEndAddress,fsSize:bo(n)}),s={originalIntelHex:u.originalIntelHex,originalMemMap:u.originalMemMap,uPyEndAddress:u.uPyEndAddress,uPyIntelHex:u.uPyIntelHex,fsSize:u.fsSize,boardId:t.boardId};r._uPyFsBuilderCache.push(s),a=Math.min(a,s.fsSize)})),this.setStorageSize(i||a),this._uPyFsBuilderCache.forEach((function(t){var e=mo(t.originalMemMap);if(Object.keys(e).length)throw new Error("There are files in the MicropythonFsHex constructor hex file input.")}))}return t.prototype.create=function(t,e){if(this.exists(t))throw new Error("File already exists.");this.write(t,e)},t.prototype.write=function(t,e){this._files[t]=new Eo(t,e)},t.prototype.append=function(t,e){if(!t)throw new Error("Invalid filename.");if(!this.exists(t))throw new Error('File "'+t+'" does not exist.');throw new Error("Append operation not yet implemented.")},t.prototype.read=function(t){if(!t)throw new Error("Invalid filename.");if(!this.exists(t))throw new Error('File "'+t+'" does not exist.');return this._files[t].getText()},t.prototype.readBytes=function(t){if(!t)throw new Error("Invalid filename.");if(!this.exists(t))throw new Error('File "'+t+'" does not exist.');return this._files[t].getBytes()},t.prototype.remove=function(t){if(!t)throw new Error("Invalid filename.");if(!this.exists(t))throw new Error('File "'+t+'" does not exist.');delete this._files[t]},t.prototype.exists=function(t){return this._files.hasOwnProperty(t)},t.prototype.size=function(t){if(!t)throw new Error("Invalid filename: "+t);if(!this.exists(t))throw new Error('File "'+t+'" does not exist.');return function(t,e){return new vo(t,e).getFsFileSize()}(this._files[t].filename,this._files[t].getBytes())},t.prototype.ls=function(){var t=[];return Object.values(this._files).forEach((function(e){return t.push(e.filename)})),t},t.prototype.setStorageSize=function(t){var e=1/0;if(this._uPyFsBuilderCache.forEach((function(t){e=Math.min(e,t.fsSize)})),t>e)throw new Error("Storage size limit provided is larger than size available in the MicroPython hex.");this._storageSize=t},t.prototype.getStorageSize=function(){return this._storageSize},t.prototype.getStorageUsed=function(){var t=this;return Object.values(this._files).reduce((function(e,r){return e+t.size(r.filename)}),0)},t.prototype.getStorageRemaining=function(){return this.getStorageSize()-this.getStorageUsed()},t.prototype.importFilesFromIntelHex=function(t,e){var r=this,n=void 0===e?{}:e,i=n.overwrite,o=void 0!==i&&i,a=n.formatFirst,u=void 0!==a&&a,s=mo(t);if(!Object.keys(s).length)throw new Error("Intel Hex does not have any files to import");u&&(this._files={});var f=[];if(Object.keys(s).forEach((function(t){!o&&r.exists(t)?f.push(t):r.write(t,s[t])})),f.length)throw new Error('Files "'+f+'" from hex already exists.');return Object.keys(s)},t.prototype.importFilesFromUniversalHex=function(t,e){var r=this,n=void 0===e?{}:e,i=n.overwrite,o=void 0!==i&&i,a=n.formatFirst,u=void 0!==a&&a;if(!Gi(t))throw new Error("Universal Hex provided is invalid.");var s=function(t){var e=Di(t);if(!e.length)throw new Error("Empty Universal Hex.");if(!Yi(e))throw new Error("Universal Hex format invalid.");for(var r=[hi.Data,hi.EndOfFile,hi.ExtendedSegmentAddress,hi.StartSegmentAddress],n={},i=0,o=0;o<e.length;o++){var a=e[o],u=Ii(a);if(r.includes(u))n[i].hex.push(a);else if(u===hi.CustomData)n[i].hex.push(ji(a,hi.Data));else if(u===hi.ExtendedLinearAddress){var s=e[o+1];if(Ii(s)===hi.BlockStart){var f=Pi(s);if(4!==f.length)throw new Error("Block Start record invalid: "+s);i=(f[0]<<8)+f[1],n[i]=n[i]||{boardId:i,lastExtAdd:a,hex:[a]},o++}n[i].lastExtAdd!==a&&(n[i].lastExtAdd=a,n[i].hex.push(a))}}var c=[];return Object.keys(n).forEach((function(t){var e=n[t].hex;":00000001FF"!==e[e.length-1]&&(e[e.length]=":00000001FF"),c.push({boardId:n[t].boardId,hex:e.join("\n")+"\n"})})),c}(t),f=[];s.forEach((function(t){var e=mo(t.hex);if(!Object.keys(e).length)throw new Error("Hex with ID "+t.boardId+" from Universal Hex does not have any files to import");f.push(e)})),f.forEach((function(t){for(var e=f.filter((function(e){return e!==t})),r=function(t,r){e.forEach((function(e){if(!e.hasOwnProperty(t)||!Jn(e[t],r))throw new Error("Mismatch in the different Hexes inside the Universal Hex")}))},n=0,i=Object.entries(t);n<i.length;n++){var o=i[n];r(o[0],o[1])}}));var c=f[0];u&&(this._files={});var l=[];if(Object.keys(c).forEach((function(t){!o&&r.exists(t)?l.push(t):r.write(t,c[t])})),l.length)throw new Error('Files "'+l+'" from hex already exists.');return Object.keys(c)},t.prototype.importFilesFromHex=function(t,e){return void 0===e&&(e={}),Gi(t)?this.importFilesFromUniversalHex(t,e):this.importFilesFromIntelHex(t,e)},t.prototype.getIntelHex=function(t){if(this.getStorageRemaining()<0)throw new Error("There is no storage space left.");var e={};if(Object.values(this._files).forEach((function(t){e[t.filename]=t.getBytes()})),void 0===t){if(1===this._uPyFsBuilderCache.length)return wo(this._uPyFsBuilderCache[0],e);throw new Error("The Board ID must be specified if there are multiple MicroPythons.")}for(var r=0,n=this._uPyFsBuilderCache;r<n.length;r++){var i=n[r];if(i.boardId===t)return wo(i,e)}throw new Error("Board ID requested not found.")},t.prototype.getIntelHexBytes=function(t){if(this.getStorageRemaining()<0)throw new Error("There is no storage space left.");var e={};if(Object.values(this._files).forEach((function(t){e[t.filename]=t.getBytes()})),void 0===t){if(1===this._uPyFsBuilderCache.length)return yo(this._uPyFsBuilderCache[0].originalMemMap,e,!0);throw new Error("The Board ID must be specified if there are multiple MicroPythons.")}for(var r=0,n=this._uPyFsBuilderCache;r<n.length;r++){var i=n[r];if(i.boardId===t)return yo(i.originalMemMap,e,!0)}throw new Error("Board ID requested not found.")},t.prototype.getUniversalHex=function(){var t=this;if(1===this._uPyFsBuilderCache.length)throw new Error("MicropythonFsHex constructor must have more than one MicroPython Intel Hex to generate a Universal Hex.");var e=[];return this._uPyFsBuilderCache.forEach((function(r){e.push({hex:t.getIntelHex(r.boardId),boardId:r.boardId})})),function(t,e){if(void 0===e&&(e=!1),!t.length)return"";for(var r=e?Vi:Wi,n=":00000001FF\n",i=[],o=0;o<t.length-1;o++){var a=r(t[o].hex,t[o].boardId);a.endsWith(n)&&(a=a.slice(0,a.length-n.length)),i.push(a)}var u=r(t[t.length-1].hex,t[t.length-1].boardId);return i.push(u),u.endsWith(n)||i.push(n),i.join("")}(e)},t}();t.MicropythonFsHex=xo,t.addIntelHexAppendedScript=function(e,r){var n=function(t){var e=t.length+4;e%16&&(e+=16-e%16);var r=new Uint8Array(e).fill(0);return r[0]=77,r[1]=80,r[2]=255&t.length,r[3]=t.length>>8&255,r.set(t,4),r}(Yn(r));if(n.length>t.AppendedBlock.Length)throw new RangeError("Too long");var i=Xn(e),o=Nn.fromHex(i);return o.set(t.AppendedBlock.StartAdd,n),o.asHexString()+"\n"},t.cleanseOldHexFormat=Xn,t.getHexMapDeviceMemInfo=so,t.getIntelHexAppendedScript=function(e){var r="",n=Nn.fromHex(e);if(n.has(t.AppendedBlock.StartAdd)){var i=n.slice(t.AppendedBlock.StartAdd,t.AppendedBlock.Length).get(t.AppendedBlock.StartAdd);77===i[0]&&80===i[1]&&(r=(r=$n(i.slice(4))).replace(/\0/g,""))}return r},t.getIntelHexDeviceMemInfo=function(t){return so(Nn.fromHex(t))},t.isAppendedScriptPresent=Qn,t.microbitBoardId=So,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=microbit-fs.umd.min.js.map
